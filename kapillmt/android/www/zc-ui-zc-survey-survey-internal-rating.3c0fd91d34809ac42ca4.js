(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{"920x":function(n,t){n.exports=".internal-rating .category-header,\n.internal-rating .sub-category-header {\n  color: #221f60; }\n\n.internal-rating .category-title-header {\n  font-size: 14px;\n  padding-bottom: 5px !important;\n  color: #221f60; }\n\n.internal-rating p-accordiontab .ui-accordion-content {\n  border: none !important; }\n\n.internal-rating p-accordiontab .ui-accordion-header,\n.internal-rating p-accordiontab .ui-state-active {\n  margin: 0 !important;\n  border: none !important; }\n\n.internal-rating p-accordiontab .ui-accordion-header :hover,\n  .internal-rating p-accordiontab .ui-state-active :hover {\n    color: black !important; }\n\n.internal-rating p-accordiontab .ui-accordion-header a,\n  .internal-rating p-accordiontab .ui-accordion-header .ui-accordion-toggle-icon,\n  .internal-rating p-accordiontab .ui-state-active a,\n  .internal-rating p-accordiontab .ui-state-active .ui-accordion-toggle-icon {\n    border: none !important;\n    background-color: #fef0d3 !important;\n    color: black !important; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a,\n  .internal-rating p-accordiontab .ui-state-active > a {\n    padding: 0 !important;\n    display: flex;\n    align-items: center; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a:focus,\n    .internal-rating p-accordiontab .ui-state-active > a:focus {\n      outline: none; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a .category-header .highlight,\n    .internal-rating p-accordiontab .ui-state-active > a .category-header .highlight {\n      padding: 10px;\n      background-color: #FAEDB6;\n      color: #221f60;\n      border-right: 3px solid #fff;\n      text-align: center !important; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a .ui-accordion-toggle-icon,\n    .internal-rating p-accordiontab .ui-state-active > a .ui-accordion-toggle-icon {\n      min-width: 30px; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a p-header,\n    .internal-rating p-accordiontab .ui-state-active > a p-header {\n      width: 100%; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a p-header .category-header,\n      .internal-rating p-accordiontab .ui-state-active > a p-header .category-header {\n        margin: 0 !important; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a p-header .category-header .header-left,\n        .internal-rating p-accordiontab .ui-state-active > a p-header .category-header .header-left {\n          display: flex;\n          align-items: center;\n          padding-left: 0; }\n\n.internal-rating p-accordiontab p-accordiontab .ui-accordion-header {\n  border: 0px !important; }\n\n.internal-rating p-accordiontab p-accordiontab .ui-accordion-header,\n.internal-rating p-accordiontab p-accordiontab .ui-state-active {\n  border-bottom: 1px solid #ccc !important; }\n\n.internal-rating p-accordiontab p-accordiontab .ui-accordion-header :hover,\n  .internal-rating p-accordiontab p-accordiontab .ui-state-active :hover {\n    color: black !important; }\n\n.internal-rating p-accordiontab p-accordiontab .ui-accordion-header a:focus,\n  .internal-rating p-accordiontab p-accordiontab .ui-state-active a:focus {\n    outline: inherit !important; }\n\n.internal-rating p-accordiontab p-accordiontab .ui-accordion-header a,\n  .internal-rating p-accordiontab p-accordiontab .ui-accordion-header .ui-accordion-toggle-icon,\n  .internal-rating p-accordiontab p-accordiontab .ui-state-active a,\n  .internal-rating p-accordiontab p-accordiontab .ui-state-active .ui-accordion-toggle-icon {\n    background-color: white !important;\n    border: none !important;\n    color: #221f60 !important; }\n\n.internal-rating p-accordiontab p-accordiontab .ui-accordion-header > a,\n  .internal-rating p-accordiontab p-accordiontab .ui-state-active > a {\n    padding: 0.571em 1em !important; }\n"},"N+aR":function(n,t,a){"use strict";a.r(t);var r=a("D57K"),i=a("LoAr"),o=a("WT9V"),e=a("981U"),c=a("05nE"),s=a("vtXP"),d=function(){function n(n){this.http=n}return n.prototype.getSurveyDetails=function(n,t){return this.http.post(n,t).pipe(Object(s.a)(function(n){return n.data}))},n.prototype.saveEditSurvey=function(n,t){return this.http.post(n,t)},n=r.c([Object(i.Injectable)(),r.f("design:paramtypes",[c.c])],n)}(),p=function(){function n(n,t,a){this.irs=n,this.as=t,this.route=a,this.isReadonly=!1,this.showBtn=!1,this.model={}}return n.prototype.ngOnInit=function(){var n=this,t=this.route.snapshot.params;if(this.payload={survey:this.options.survey,uid:t.uid},this.options.api.params&&this.options.api.params.length>0){var a=this.as.getParams(this.options.api.params,zc);Object.assign(this.payload,a)}var r=this.checkMode(this.options.mode);"view"===r&&(this.isReadonly=!0),this.irs.getSurveyDetails(this.options.api.list,this.payload).subscribe(function(t){var a=JSON.parse(JSON.stringify(t));n.weightageConfig=a.widgetMeta.weightage_config,t.widgetMeta&&t.widgetMeta.entity&&(n.payload.entity=t.widgetMeta.entity),n.questionList=a.categories,n.updateFormula(),"view"!==r&&(n.showBtn=!0)}),this.zcFormOptions={id:this.options.id+"Form",mode:this.options.mode,fields:this.options.fields}},n.prototype.ngAfterViewInit=function(){zc[this.options.id]=this},n.prototype.reload=function(){this.ngOnInit()},n.prototype.ngDoCheck=function(){},n.prototype.dropDownChange=function(n,t){t.answer=n.value,this.updateFormula()},n.prototype.inputTextChange=function(n,t){console.log("event",n),this.updateFormula()},n.prototype.updateFormula=function(){this.questionList.map(function(n){n.category.calWeightage=0;var t=0,a=0;n.subCategories.map(function(n){var r=0,i=0;if(n.questions.forEach(function(n){n.answer&&n.answer.weightage>0&&(r+=n.answer.weightage,i+=1)}),r/=i,r=isNaN(r)?0:r.toFixed(2),n.subCategory.calWeightage=r,r>0){var o=parseFloat(n.weightage)/100;t+=o*r,a+=o}}),n.category.calWeightage=(t/a).toFixed(2),console.log("category weightage",n.category.calWeightage)})},n.prototype.checkMode=function(n){try{return new Function("return "+n+" ; ")()}catch(t){console.log("key",n)}},n.prototype.submit=function(n){var t=this;console.log("arg",n);var a=this.getAnswers();if(this.payload.answers=a,n&&n.params){var r=this.as.getParams(n.params,zc);Object.assign(this.payload,r)}this.irs.saveEditSurvey(this.options.api.save,this.payload).subscribe(function(a){t.as.onSuccess(n.onSuccess,{})})},n.prototype.submitBySubCategory=function(n,t){var a=this.getAnswersBySubCategory(n,t);if(this.payload.answers=a,this.options.api.params){var r=this.as.getParams(this.options.api.params,zc);Object.assign(this.payload,r)}this.irs.saveEditSurvey(this.options.api.save,this.payload).subscribe(function(n){})},n.prototype.getAnswersBySubCategory=function(n,t){var a=[];return t.questions.forEach(function(r){if(r.answer){var i={category:n.category.code,subCategory:t.subCategory.code,question:r.code,type:r.type,answer:r.answer};a.push(i)}}),a},n.prototype.getAnswers=function(){var n=[];return this.questionList.forEach(function(t){t.subCategories.forEach(function(a){a.questions.forEach(function(r){if(r.answer){var i={category:t.category.code,subCategory:a.subCategory.code,question:r.code,type:r.type,answer:r.answer};n.push(i)}})})}),n},r.c([Object(i.Input)(),r.f("design:type",Object)],n.prototype,"options",void 0),n=r.c([Object(i.Component)({selector:"zc-survey-internal-rating",template:a("l+4N"),encapsulation:i.ViewEncapsulation.None,styles:[a("920x")]}),r.f("design:paramtypes",[d,c.a,e.ActivatedRoute])],n)}(),l=a("Hhcr"),u=a("Hpdm"),g=a("IfiR"),h=function(){function n(){}return n.prototype.transform=function(n,t){console.log("value",n),console.log("args",t);var a=0;return t.forEach(function(n){n.answer&&(a+=n.answer.weightage)}),a},n=r.c([Object(i.Pipe)({name:"internalFactor"})],n)}(),b=a("pnHo");a.d(t,"InternalRatingModule",function(){return v});var v=function(){function n(){}return n=r.c([Object(i.NgModule)({declarations:[p,h],imports:[o.CommonModule,b.a,l.AccordionModule,u.DropdownModule,g.FormsModule],providers:[d],exports:[p]})],n)}()},"l+4N":function(n,t){n.exports='<div class="internal-rating bg-white survey-header">\r\n  <h3 class="header p-2" *ngIf="options.title">{{ options.title }}</h3>\r\n  <div class="body p-4">\r\n    <div class="row col-12 m-0 p-0 category-title-header">\r\n      <div class="col-9 pl-0">Business Risks Categories</div>\r\n      <div class="col-3">\r\n        <div class="row">\r\n          <div class="col-6 text-center">Factor</div>\r\n          <div class="col-6 text-center">Weight(%)</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <p-accordion [multiple]="true">\r\n      <p-accordionTab\r\n        [selected]="true"\r\n        [cache]="true"\r\n        *ngFor="let category of questionList"\r\n      >\r\n        <p-header>\r\n          <div class="category-header">\r\n            <div class="row col-12 m-0 p-0">\r\n              <div class="col-9 header-left">{{ category.category.name }}</div>\r\n              <div class="col-3">\r\n                <div class="row">\r\n                  <div class="col-6 text-right highlight">\r\n                    {{ category.category.calWeightage || \'0.00\' }}\r\n                  </div>\r\n                  <div class="col-6 text-right highlight">\r\n                    {{ category.weightage }} %\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </p-header>\r\n        <p-accordion [multiple]="true">\r\n          <p-accordionTab\r\n            [selected]="false"\r\n            [cache]="true"\r\n            *ngFor="let subCategory of category.subCategories"\r\n          >\r\n            <p-header>\r\n              <div class="sub-category-header">\r\n                <div class="row col-12 m-0 p-0">\r\n                  <div class="col-9 pl-0">\r\n                    {{ subCategory.subCategory.name }}\r\n                  </div>\r\n                  <div class="col-3">\r\n                    <div class="row">\r\n                      <div class="col-6 text-right">\r\n                        {{ subCategory.subCategory.calWeightage || \'0.00\' }}\r\n                      </div>\r\n                      <div class="col-6 text-right">\r\n                        {{ subCategory.weightage }} %\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </p-header>\r\n            <div *ngFor="let question of subCategory.questions">\r\n              <div class="question">\r\n                <div class="row col-12">\r\n                  <div class="col">\r\n                    <label>{{ question.question }}</label>\r\n                  </div>\r\n                  <div class="col-4">\r\n                    <p-dropdown\r\n                      [disabled]="isReadonly"\r\n                      optionLabel="name"\r\n                      appendTo="body"\r\n                      dataKey="uid"\r\n                      [style]="{ width: \'100%\' }"\r\n                      placeholder="select any options"\r\n                      [options]="question.options_data.data"\r\n                      [(ngModel)]="question.answer"\r\n                      (onChange)="dropDownChange($event, question)"\r\n                    ></p-dropdown>\r\n                  </div>\r\n                  <div class="col-2">\r\n                    <input\r\n                      type="number"\r\n                      [readonly]="isReadonly"\r\n                      min="0"\r\n                      class="form-control"\r\n                      *ngIf="question.answer"\r\n                      (change)="inputTextChange($event, question)"\r\n                      [(ngModel)]="question.answer.weightage"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \x3c!--\r\n              <div class="col-12 text-right p-2 pr-5">\r\n                <button type="submit" (click)="submitBySubCategory(category,subCategory)"\r\n                  class="btn btn-primary submit-button">Save</button>\r\n              </div>\r\n            --\x3e\r\n          </p-accordionTab>\r\n        </p-accordion>\r\n      </p-accordionTab>\r\n    </p-accordion>\r\n  </div>\r\n  <div class="footer text-center pb-2" *ngIf="showBtn">\r\n    <zc-form [options]="zcFormOptions" [model]="model"></zc-form>\r\n    \x3c!-- <button\r\n      type="submit"\r\n      (click)="submit()"\r\n      class="btn btn-primary submit-button"\r\n    >\r\n      Submit\r\n    </button> --\x3e\r\n  </div>\r\n</div>\r\n'}}]);