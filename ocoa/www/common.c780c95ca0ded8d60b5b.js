(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"7++q":function(t,n,o){"use strict";o.r(n);var i=o("D57K"),e=o("LoAr"),r=o("WT9V"),s=o("DUHm"),a=o("SHvt"),c=o("981U"),p=o("vtXP"),d=o("05nE"),u=function(){function t(t,n,o,i){this.ws=t,this.modalService=n,this.route=o,this.cache=i,this.actionList=[],this.history=[]}return t.prototype.ngOnInit=function(){var t=this;this.actionList=[];var n={uid:this.route.snapshot.params.uid,entity:this.options.entity},o=this.route.snapshot.queryParams;"true"===o.currentStage&&this.ws.getWorkflow("workflow/getActions","post",n).subscribe(function(n){t.actionList=n.actions});var i={entity:this.options.entity,uid:this.route.snapshot.params.uid};this.historyList$=this.ws.getHistoryByStageGroup(i).pipe(Object(p.a)(function(t){var n=t.findIndex(function(t){return t.stage.code===o.stage});return-1===n?t:t.slice(n)}))},t.prototype.ngAfterViewInit=function(){zc[this.options.id]=this},t.prototype.reload=function(){this.ngOnInit()},t.prototype.performAction=function(t){var n=this;this.cache.clearCache(),this.currentAction=t,zc.params=i.a({},zc.params,{action:t}),this.pageInfo=null;var o=t.page;o=-1!==o.indexOf("/")?"page/"+o:"page/_/_/"+o,this.ws.getActionPageInfo(o).subscribe(function(t){t.instructions.definition&&t.instructions.definition.widgets&&(n.pageInfo=t.instructions.definition.widgets,n.modal=n.modalService.open(n.zcFormModal,{size:"lg",centered:!0,windowClass:"zc-action-modal"}))})},t.prototype.loadHistory=function(){var t={entity:this.options.entity,uid:this.route.snapshot.params.uid};this.historyList$=this.ws.getHistory(t)},t.prototype.close=function(){this.modal&&this.modal.dismiss()},t.prototype.ngOnDestroy=function(){this.modal&&this.modal.dismiss()},i.c([Object(e.Input)(),i.f("design:type",Object)],t.prototype,"options",void 0),i.c([Object(e.ViewChild)("zcFormModal"),i.f("design:type",Object)],t.prototype,"zcFormModal",void 0),t=i.c([Object(e.Component)({selector:"zc-workflow",template:o("yORG"),styles:[o("VuVh")]}),i.f("design:paramtypes",[s.a,a.e,c.ActivatedRoute,d.g])],t)}(),l=o("k/eh");o.d(n,"ZcWorkflowModule",function(){return f});var f=function(){function t(){}return t=i.c([Object(e.NgModule)({imports:[r.CommonModule,l.b],declarations:[u],exports:[u],providers:[s.a]})],t)}()},DUHm:function(t,n,o){"use strict";o.d(n,"a",function(){return a});var i=o("D57K"),e=o("LoAr"),r=o("05nE"),s=o("vtXP"),a=function(){function t(t){this.http=t}return t.prototype.getWorkflow=function(t,n,o){return"post"===n?this.http.post(t,o).pipe(Object(s.a)(function(t){return t.data})):this.http.get(t,{params:o}).pipe(Object(s.a)(function(t){return t.data}))},t.prototype.getActionPageInfo=function(t){return this.http.get(t).pipe(Object(s.a)(function(t){return t.data}))},t.prototype.getHistoryByStageGroup=function(t){return this.http.post("workflow/getHistory",t).pipe(Object(s.a)(function(t){for(var n=t.data.listData.rows,o=[],i=function(t){var i=n[t],e=o.find(function(t){return i.from.stage.code===t.stage.code});if(e)e.history.push(i);else if(i.from.stage.code){var r={stage:i.from.stage,history:[]};r.history.push(i),o.push(r)}},e=0;e<n.length;e++)i(e);return o}))},t.prototype.getHistory=function(t){return this.http.post("workflow/getHistory",t).pipe(Object(s.a)(function(t){return t.data.listData.rows}))},t=i.c([Object(e.Injectable)(),i.f("design:paramtypes",[r.c])],t)}()},VuVh:function(t,n){t.exports=""},j3C3:function(t,n,o){"use strict";o.d(n,"a",function(){return s});var i=o("D57K"),e=o("LoAr"),r=o("05nE"),s=function(){function t(t){this.apiKey=t.settings.googleMapKey,this.libraries=["places"]}return t=i.c([Object(e.Injectable)(),i.f("design:paramtypes",[r.b])],t)}()},pnHo:function(t,n,o){"use strict";o("F6v2"),o("gAiz");var i=o("Qgf8");o("cjWd"),o("Uh16");o.d(n,"a",function(){return i.ZcFormModule})},yORG:function(t,n){t.exports='<div class="zc-widget-workflow" *ngIf="actionList && actionList.length >0">\r\n  <div class="workflow-head" *ngIf="options.title">\r\n    <span>{{options.title}}</span>\r\n  </div>\r\n  <div class="workflow-body">\r\n    <div class="workflow-action-btn" *ngFor=\'let action of actionList; let inx = index;\'>\r\n      <button type="button" (click)="performAction(action)" class="btn btn-default"\r\n        [ngStyle]="{\'backgroundColor\': action.bg_color,\'color\':action.text_color}">\r\n        <i *ngIf="action.icon" [ngClass]="action.icon"></i>\r\n        <label>{{action.name}}</label>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\x3c!-- <div class="zc-workflow-history">\r\n  <div class="group-container" *ngFor="let groupItem of historyList$ | async;let index=index">\r\n    <h4 class="m-2">{{groupItem.stage?.name}}</h4>\r\n    <div class="item hr bg-white p-2 mb-2" *ngFor="let item of groupItem.history;let index=index">\r\n      <div>{{item.from?.stage?.name}} : Workflow</div>\r\n      <label>{{item.from?.user?.first_name}}</label> <strong> {{item.from?.action?.action}}</strong> To Credit\r\n      <label>{{item.to?.user?.first_name}}</label> On {{item?.received_date_time | date}}\r\n    </div>\r\n  </div>\r\n</div> --\x3e\r\n\r\n<ng-template #zcFormModal let-c="close" let-d="dismiss">\r\n  <div class="modal-header">\r\n    <h4 class="modal-title" id="modal-basic-title">{{currentAction.name}}</h4>\r\n    <i class="btn icon-close" (click)="d();"></i>\r\n  </div>\r\n  <div class="modal-body">\r\n    <zc-page-render [options]="{ widgets: pageInfo }"></zc-page-render>\r\n  </div>\r\n</ng-template>'}}]);