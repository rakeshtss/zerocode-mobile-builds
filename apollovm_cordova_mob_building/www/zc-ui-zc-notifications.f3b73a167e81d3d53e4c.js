(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"2/C2":function(t,i,n){"use strict";n.r(i);var o=n("D57K"),s=n("LoAr"),a=n("WT9V"),e=n("981U"),r=n("05nE"),c=function(){function t(t){this.http=t}return t.prototype.getNotificationList=function(t,i){return this.http.post(t,i).map(function(t){return t})},t.prototype.readAll=function(){return this.http.post("api/user/select/get-notification-info",{readAll:!0})},t=o.c([Object(s.Injectable)({providedIn:"root"}),o.f("design:paramtypes",[r.c])],t)}(),l=function(){function t(t,i,n){this.router=t,this.route=i,this.notificationService=n,this.notifications=[],this.notificationsCount=0,this.appName="zcbase"}return t.prototype.ngOnInit=function(){var t=this;this.route.snapshot.params.app&&(this.appName=this.route.snapshot.params.app),this.allUrl="/"+this.appName+"/account/notification-list",this.notificationUrl="/"+this.appName+"/account/notification-view/",zcGlobal.notificationList=this,this.options.allUrl&&(this.allUrl=this.options.allUrl),this.options.notificationUrl&&(this.notificationUrl=this.options.notificationUrl),this.paramsSubscribe$=this.router.events.subscribe(function(i){i instanceof e.NavigationEnd&&t.notificationsList()}),this.notificationsList()},t.prototype.notificationsList=function(){var t=this,i={rows:5,dynaFilters:[{fieldName:"status",key:"status",value:"unread",matchType:"any"}]};this.notificationService.getNotificationList("zc-notification/notificationList",i).subscribe(function(i){i.success&&(t.notifications=i.data.listData.rows,t.notificationsCount=i.data.listData.records)})},t.prototype.ngOnDestroy=function(){this.paramsSubscribe$&&this.paramsSubscribe$.unsubscribe()},t.prototype.readAll=function(){var t=this;this.notificationService.readAll().subscribe(function(i){console.warn(i),i.success&&t.reload()})},t.prototype.reload=function(){this.ngOnInit()},o.c([Object(s.Input)(),o.f("design:type",Object)],t.prototype,"options",void 0),t=o.c([Object(s.Component)({selector:"zc-notifications",template:n("peEp"),styles:[n("eGZN")]}),o.f("design:paramtypes",[e.Router,e.ActivatedRoute,c])],t)}(),p=n("SHvt");n.d(i,"ZcNotificationModule",function(){return u});var u=function(){function t(){}return t=o.c([Object(s.NgModule)({declarations:[l],imports:[a.CommonModule,e.RouterModule,p.g],exports:[l]})],t)}()},eGZN:function(t,i){t.exports=""},peEp:function(t,i){t.exports='<div ngbDropdown placement="bottom-right" #myDrop="ngbDropdown">\r\n    <a class="icon icon-bell" id="dropdownBasic1" ngbDropdownToggle>\r\n        <span class="zc-number" *ngIf="notificationsCount > 0">{{notificationsCount}}</span>\r\n    </a>\r\n    <div ngbDropdownMenu aria-labelledby="dropdownBasic1">\r\n        <h4>Notifications</h4>\r\n        <ul class="zc-notifications-list">\r\n            <li *ngFor="let notification of notifications;" [routerLink]="[notificationUrl+notification.uid]"><a (click)="myDrop.close();"> {{notification.subject}}</a></li>\r\n        </ul>\r\n        <div class="notification-footer">\r\n            <a class="read-all" (click)="readAll();">Read All</a>\r\n            <a class="see-all" [routerLink]="[allUrl]" (click)="myDrop.close();">See All</a>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n'}}]);