(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"3r91":function(t,i,o){var n,e,r;r=function(t){function i(t,i,o,n){t.hasOwnProperty(i)||(t[i]=n.apply(null,o))}i(t=t?t._modules:{},"mixins/draw-point.js",[],function(){return function(t){(t.attribs=t.attribs||{}).class=this.getClassName(),(function(t){var i=this,o=i.graphic,n=t.animatableAttribs,e=t.onComplete,r=t.css,a=t.renderer;if(i.shouldDraw())o||(i.graphic=o=a[t.shapeType](t.shapeArgs).add(t.group)),o.css(r).attr(t.attribs).animate(n,!t.isNew&&void 0,e);else if(o){var s=function(){i.graphic=o=o.destroy(),"function"==typeof e&&e()};Object.keys(n).length?o.animate(n,void 0,function(){s()}):s()}}).call(this,t)}}),i(t,"mixins/polygon.js",[t["parts/Globals.js"],t["parts/Utilities.js"]],function(t,i){var o=i.isArray,n=i.isNumber,e=t.deg2rad,r=t.find,a=function(t,i){return i=n(i)?i:14,i=Math.pow(10,i),Math.round(t*i)/i},s=function(t,i){return t=t.map(function(t){return t[0]*i[0]+t[1]*i[1]}),{min:Math.min.apply(this,t),max:Math.max.apply(this,t)}},c=function(t,i){var o=t[0];t=t[1];var n=e*-i;return i=Math.cos(n),n=Math.sin(n),[a(o*i-t*n),a(o*n+t*i)]},l=function(t,i,o){return[(t=c([t[0]-i[0],t[1]-i[1]],o))[0]+i[0],t[1]+i[1]]},p=function(t){var i=t.axes;if(!o(i)){i=[];var n=n=t.concat([t[0]]);n.reduce(function(t,o){var n=function(t,i){var o=i[0]-t[0];return[[-(t=i[1]-t[1]),o],[t,-o]]}(t,o)[0];return r(i,function(t){return t[0]===n[0]&&t[1]===n[1]})||i.push(n),o}),t.axes=i}return i};return{getBoundingBoxFromPolygon:function(t){return t.reduce(function(t,i){var o=i[0];return i=i[1],t.left=Math.min(o,t.left),t.right=Math.max(o,t.right),t.bottom=Math.max(i,t.bottom),t.top=Math.min(i,t.top),t},{left:Number.MAX_VALUE,right:-Number.MAX_VALUE,bottom:-Number.MAX_VALUE,top:Number.MAX_VALUE})},getPolygon:function(t,i,o,n,e){var r=[t,i],a=t-o/2;return t+=o/2,[[a,o=i-n/2],[t,o],[t,i+=n/2],[a,i]].map(function(t){return l(t,r,-e)})},isPolygonsColliding:function(t,i){var o=function(t,i){return t=p(t),i=p(i),t.concat(i)}(t,i);return!r(o,function(o){var n=s(t,o);return!!((o=s(i,o)).min>n.max||o.max<n.min)})},movePolygon:function(t,i,o){return o.map(function(o){return[o[0]+t,o[1]+i]})},rotate2DToOrigin:c,rotate2DToPoint:l}}),i(t,"modules/wordcloud.src.js",[t["parts/Globals.js"],t["parts/Utilities.js"],t["mixins/draw-point.js"],t["mixins/polygon.js"]],function(t,i,o,n){function e(t,i){var o=!1,n=t.rect,e=t.polygon,r=t.lastCollidedWith,a=function(i){var o=i.rect;return(o=!(o.left>n.right||o.right<n.left||o.top>n.bottom||o.bottom<n.top))&&(t.rotation%90||i.roation%90)&&(o=y(e,i.polygon)),o};return r&&((o=a(r))||delete t.lastCollidedWith),o||(o=!!m(i,function(i){var o=a(i);return o&&(t.lastCollidedWith=i),o})),o}function r(t){var i=4*t,o=Math.ceil((Math.sqrt(i)-1)/2),n=2*o+1,e=Math.pow(n,2),r=!1;return--n,1e4>=t&&("boolean"==typeof r&&i>=e-n&&(r={x:o-(e-i),y:-o}),e-=n,"boolean"==typeof r&&i>=e-n&&(r={x:-o,y:e-i-o}),e-=n,"boolean"==typeof r&&(r=i>=e-n?{x:e-i-o,y:o}:{x:o,y:o-(e-i-n)}),r.x*=5,r.y*=5),r}function a(t,i,o,n){var e=!1;return h(t)&&h(i)&&h(o)&&h(n)&&0<t&&-1<i&&n>o&&(e=o+i%t*((n-o)/(t-1||1))),e}function s(t,i){var o=i.width/2,n=-i.height/2,e=i.height/2;return!(-i.width/2<t.left&&o>t.right&&n<t.top&&e>t.bottom)}function c(t,i){var o=i.placed,n=i.field,r=i.rectangle,a=i.polygon,c=i.spiral,l=1,p={x:0,y:0},h=t.rect=d({},r);for(t.polygon=a,t.rotation=i.rotation;!1!==p&&(e(t,o)||s(h,n));)p=c(l),u(p)&&(h.left=r.left+p.x,h.right=r.right+p.x,h.top=r.top+p.y,h.bottom=r.bottom+p.y,t.polygon=v(p.x,p.y,a)),l++;return p}function l(t,i){if(u(t)&&u(i)){var o=i.bottom-i.top,n=i.right-i.left;i=t.ratioX;var e=t.ratioY;o=n*i>o*e?n:o,t=f(t,{width:t.width+o*i*2,height:t.height+o*e*2})}return t}var p=i.isArray,h=i.isNumber,u=i.isObject,d=t.extend,f=t.merge;i=t.noop;var m=t.find,g=n.getBoundingBoxFromPolygon,x=n.getPolygon,y=n.isPolygonsColliding,v=n.movePolygon,b=t.Series;t.seriesType("wordcloud","column",{allowExtendPlayingField:!0,animation:{duration:500},borderWidth:0,clip:!1,colorByPoint:!0,minFontSize:1,maxFontSize:25,placementStrategy:"center",rotation:{from:0,orientations:2,to:90},showInLegend:!1,spiral:"rectangular",style:{fontFamily:"sans-serif",fontWeight:"900",whiteSpace:"nowrap"},tooltip:{followPointer:!0,pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.weight}</b><br/>'}},{animate:b.prototype.animate,animateDrilldown:i,animateDrillupFrom:i,setClip:i,bindAxes:function(){var t={endOnTick:!1,gridLineWidth:0,lineWidth:0,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]};b.prototype.bindAxes.call(this),d(this.yAxis.options,t),d(this.xAxis.options,t)},pointAttribs:function(i,o){return delete(i=t.seriesTypes.column.prototype.pointAttribs.call(this,i,o)).stroke,delete i["stroke-width"],i},deriveFontSize:function(t,i,o){return t=h(t)?t:0,i=h(i)?i:1,o=h(o)?o:1,Math.floor(Math.max(o,t*i))},drawPoints:function(){var t=this,i=t.hasRendered,o=t.xAxis,n=t.yAxis,e=t.group,r=t.options,a=r.animation,s=r.allowExtendPlayingField,p=t.chart.renderer,f=p.text().add(e),m=[],y=t.placementStrategy[r.placementStrategy],v=r.rotation,b=t.points.map(function(t){return t.weight}),w=Math.max.apply(null,b),M=t.points.sort(function(t,i){return i.weight-t.weight});M.forEach(function(i){var o=t.deriveFontSize(1/w*i.weight,r.maxFontSize,r.minFontSize);o=d({fontSize:o+"px"},r.style),f.css(o).attr({x:0,y:0,text:i.name}),o=f.getBBox(!0),i.dimensions={height:o.height,width:o.width}});var S=function(t,i,o){o=o.reduce(function(t,i){i=i.dimensions;var o=Math.max(i.width,i.height);return t.maxHeight=Math.max(t.maxHeight,i.height),t.maxWidth=Math.max(t.maxWidth,i.width),t.area+=o*o,t},{maxHeight:0,maxWidth:0,area:0});var n=t>i?t/i:1;return{width:(o=Math.max(o.maxHeight,o.maxWidth,.85*Math.sqrt(o.area)))*n,height:o*(t=i>t?i/t:1),ratioX:n,ratioY:t}}(o.len,n.len,M),A=function(t,i){var o,n=[];for(o=1;1e4>o;o++)n.push(t(o,i));return function(t){return 1e4>=t&&n[t-1]}}(t.spirals[r.spiral],{field:S});M.forEach(function(o){var n=t.deriveFontSize(1/w*o.weight,r.maxFontSize,r.minFontSize);n=d({fontSize:n+"px"},r.style);var f=y(o,{data:M,field:S,placed:m,rotation:v}),b=d(t.pointAttribs(o,o.selected&&"select"),{align:"center","alignment-baseline":"middle",x:f.x,y:f.y,text:o.name,rotation:f.rotation}),P=x(f.x,f.y,o.dimensions.width,o.dimensions.height,f.rotation),k=g(P),z=c(o,{rectangle:k,polygon:P,field:S,placed:m,spiral:A,rotation:f.rotation});if(!z&&s&&(z=c(o,{rectangle:k,polygon:P,field:S=l(S,k),placed:m,spiral:A,rotation:f.rotation})),u(z)?(b.x+=z.x,b.y+=z.y,k.left+=z.x,k.right+=z.x,k.top+=z.y,k.bottom+=z.y,(!h((f=S).left)||f.left>k.left)&&(f.left=k.left),(!h(f.right)||f.right<k.right)&&(f.right=k.right),(!h(f.top)||f.top>k.top)&&(f.top=k.top),(!h(f.bottom)||f.bottom<k.bottom)&&(f.bottom=k.bottom),S=f,m.push(o),o.isNull=!1):o.isNull=!0,a){var F={x:b.x,y:b.y};i?(delete b.x,delete b.y):(b.x=0,b.y=0)}o.draw({animatableAttribs:F,attribs:b,css:n,group:e,renderer:p,shapeArgs:void 0,shapeType:"text"})}),f=f.destroy(),o=function(t,i,o){var n=2*Math.max(Math.abs(o.top),Math.abs(o.bottom));return o=2*Math.max(Math.abs(o.left),Math.abs(o.right)),Math.min(0<o?1/o*t:1,0<n?1/n*i:1)}(o.len,n.len,S),t.group.attr({scaleX:o,scaleY:o})},hasData:function(){return u(this)&&!0===this.visible&&p(this.points)&&0<this.points.length},placementStrategy:{random:function(t,i){var o=i.field;return i=i.rotation,{x:Math.round(o.width*(Math.random()+.5)/2)-o.width/2,y:Math.round(o.height*(Math.random()+.5)/2)-o.height/2,rotation:a(i.orientations,t.index,i.from,i.to)}},center:function(t,i){return{x:0,y:0,rotation:a((i=i.rotation).orientations,t.index,i.from,i.to)}}},pointArrayMap:["weight"],spirals:{archimedean:function(t,i){var o=i.field;i=!1,o=o.width*o.width+o.height*o.height;var n=.8*t;return 1e4>=t&&(i={x:n*Math.cos(n),y:n*Math.sin(n)},Math.min(Math.abs(i.x),Math.abs(i.y))<o||(i=!1)),i},rectangular:function(t,i){return t=r(t),i=i.field,t&&(t.x*=i.ratioX,t.y*=i.ratioY),t},square:r},utils:{extendPlayingField:l,getRotation:a,isPolygonsColliding:y,rotate2DToOrigin:n.rotate2DToOrigin,rotate2DToPoint:n.rotate2DToPoint},getPlotBox:function(){var t=this.chart,i=t.inverted,o=this[i?"yAxis":"xAxis"];return i=this[i?"xAxis":"yAxis"],{translateX:(o?o.left:t.plotLeft)+(o?o.len:t.plotWidth)/2,translateY:(i?i.top:t.plotTop)+(i?i.len:t.plotHeight)/2,scaleX:1,scaleY:1}}},{draw:o,shouldDraw:function(){return!this.isNull},isValid:function(){return!0},weight:1})}),i(t,"masters/modules/wordcloud.src.js",[],function(){})},t.exports?(r.default=r,t.exports=r):(n=[o("sogb")],void 0===(e=(function(t){return r(t),r.Highcharts=t,r}).apply(i,n))||(t.exports=e))},AHvf:function(t,i){t.exports='<div [chart]="chart" *ngIf="chart"></div>'},x4SC:function(t,i){t.exports=""},"y+lf":function(t,i,o){"use strict";o.r(i);var n=o("D57K"),e=o("LoAr"),r=o("WT9V"),a=o("GiBk"),s=o("sogb"),c=o("05nE"),l=o("3cnr"),p=o("e+PY"),h=o("vtXP");o("3r91")(s);var u=function(){function t(t,i,o,n){this.http=t,this._zcHttp=i,this.actionService=o,this.chartService=n}return t.prototype.ngOnInit=function(){var t=this;this.chartId="hc_"+this.options.id;var i=this.options.id,o={};this.config={chart:{type:"wordcloud",height:this.options.height||"400px"},accessibility:{screenReaderSection:{}},exporting:{enabled:this.options.download||!1,buttons:{contextButton:{menuItems:["print","downloadPNG","downloadJPEG","downloadPDF","downloadSVG"]}}},plotOptions:{wordcloud:{cursor:"pointer"},series:{label:{connectorAllowed:!0},point:{events:{click:function(t){var n=this;if("multiple"===o.click.selection){var e=[];if(zc[i]&&zc[i].selected&&(e=zc[i].selected),e&&e.length>0)-1===e.findIndex(function(t){return t.name===n.options.name})&&e.push(this.options);else e.push(this.options);zc[i].selected=e}else zc[i].selected=this.options;if(console.log("--\x3e",zc[i].selected),o.click.script)try{new Function("item",o.click.script)(this.options)}catch(r){console.warn("error",r,o.click.script)}o.click.actions&&o.click.actions.forEach(function(t){zc[i].actionService.action(t,n.options,{})})}}}}},series:[],title:{text:""}},o.click={},this.options.events&&this.options.events.click&&(o.click.selection="multiple",this.options.events.click.selection&&(o.click.selection=this.options.events.click.selection),this.options.events.click.script&&(o.click.script=this.options.events.click.script),this.options.events.click.actions&&(o.click.actions=this.options.events.click.actions)),this.getChartDataViaAPI(this.options).subscribe(function(i){t.config.series=i,console.log("this.config wordcloud chart",t.config),t.chart=new p.a(t.config)})},t.prototype.ngAfterViewInit=function(){console.log("pie chart id --\x3e",this.options.id),this.options.id},t.prototype.getChartDataViaAPI=function(t){var i=this;if(t.title&&(this.config.title.text=t.title),this.options.chartTitle.align&&(this.config.title.align=this.options.chartTitle.align),t.dataSource&&t.dataSource.api){var o={};return t.dataSource.api.params&&(o=this.actionService.getParams(t.dataSource.api.params,{})),this._zcHttp.post(t.dataSource.api.url,o).pipe(Object(h.a)(function(o){var n,e=[],r=[];if(i.options.dataSource.api.mapScript?r=c.o.evalFun(i.options.dataSource.api.mapScript,{item:o.data,data:o.data,options:i.options}):o.data&&o.data.listData&&o.data.listData.rows&&(r=o.data.listData.rows),r){n=r||[];var a="name",s="value";t.dataSource.api.map&&(t.dataSource.api.map.xAxis&&(a=t.dataSource.api.map.xAxis),t.dataSource.api.map.yAxis&&(s=t.dataSource.api.map.yAxis));var l=[];n.forEach(function(t){var i=t[s]||0,o=t[a]||0;l.push([o,i])});var p=void 0,h={};t.plotOptions.horizontal&&(h={from:-0,to:0,orientations:0}),i.options.plotOptions&&i.options.plotOptions.minFontSize&&(p=i.options.plotOptions.minFontSize||4),e.push({name:"series",minFontSize:p,innerSize:void 0,data:l,rotation:h})}return e}))}},n.c([Object(e.Input)(),n.f("design:type",Object)],t.prototype,"options",void 0),t=n.c([Object(e.Component)({selector:"zc-highchart-wordcloud",template:o("AHvf"),styles:[o("x4SC")]}),n.f("design:paramtypes",[a.HttpClient,c.c,c.a,l.a])],t)}();o.d(i,"WordcloudModule",function(){return d});var d=function(){function t(){}return t=n.c([Object(e.NgModule)({declarations:[u],imports:[r.CommonModule,a.HttpClientModule,p.b],entryComponents:[u],exports:[u]})],t)}()}}]);