(window.webpackJsonp=window.webpackJsonp||[]).push([[56,59],{"/gwa":function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=o("LoAr"),s=o("WT9V"),l=o("x+8x"),a=o("qpXW"),c=0,d=function(){function e(e){this.el=e,this.collapsed=!1,this.expandIcon="pi pi-plus",this.collapseIcon="pi pi-minus",this.showHeader=!0,this.toggler="icon",this.collapsedChange=new r.EventEmitter,this.onBeforeToggle=new r.EventEmitter,this.onAfterToggle=new r.EventEmitter,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="ui-panel-"+c++}return e.prototype.onHeaderClick=function(e){"header"===this.toggler&&this.toggle(e)},e.prototype.onIconClick=function(e){"icon"===this.toggler&&this.toggle(e)},e.prototype.toggle=function(e){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:e,collapsed:this.collapsed}),this.toggleable&&(this.collapsed?this.expand(e):this.collapse(e)),e.preventDefault()},e.prototype.expand=function(e){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)},e.prototype.collapse=function(e){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)},e.prototype.getBlockableElement=function(){return this.el.nativeElement.children[0]},e.prototype.onToggleDone=function(e){this.animating=!1,this.onAfterToggle.emit({originalEvent:e,collapsed:this.collapsed})},n([r.Input(),i("design:type",Boolean)],e.prototype,"toggleable",void 0),n([r.Input(),i("design:type",String)],e.prototype,"header",void 0),n([r.Input(),i("design:type",Boolean)],e.prototype,"collapsed",void 0),n([r.Input(),i("design:type",Object)],e.prototype,"style",void 0),n([r.Input(),i("design:type",String)],e.prototype,"styleClass",void 0),n([r.Input(),i("design:type",String)],e.prototype,"expandIcon",void 0),n([r.Input(),i("design:type",String)],e.prototype,"collapseIcon",void 0),n([r.Input(),i("design:type",Boolean)],e.prototype,"showHeader",void 0),n([r.Input(),i("design:type",String)],e.prototype,"toggler",void 0),n([r.Output(),i("design:type",r.EventEmitter)],e.prototype,"collapsedChange",void 0),n([r.Output(),i("design:type",r.EventEmitter)],e.prototype,"onBeforeToggle",void 0),n([r.Output(),i("design:type",r.EventEmitter)],e.prototype,"onAfterToggle",void 0),n([r.Input(),i("design:type",String)],e.prototype,"transitionOptions",void 0),n([r.ContentChild(l.Footer),i("design:type",Object)],e.prototype,"footerFacet",void 0),e=n([r.Component({selector:"p-panel",template:'\n        <div [attr.id]="id" [ngClass]="\'ui-panel ui-widget ui-widget-content ui-corner-all\'" [ngStyle]="style" [class]="styleClass">\n            <div [ngClass]="{\'ui-panel-titlebar ui-widget-header ui-helper-clearfix ui-corner-all\': true, \'ui-panel-titlebar-clickable\': (toggleable && toggler === \'header\')}" \n                *ngIf="showHeader" (click)="onHeaderClick($event)">\n                <span class="ui-panel-title" *ngIf="header">{{header}}</span>\n                <ng-content select="p-header"></ng-content>\n                <a *ngIf="toggleable" [attr.id]="id + \'-label\'" class="ui-panel-titlebar-icon ui-panel-titlebar-toggler ui-corner-all ui-state-default" tabindex="0"\n                    (click)="onIconClick($event)" (keydown.enter)="onIconClick($event)" [attr.aria-controls]="id + \'-content\'" role="tab" [attr.aria-expanded]="!collapsed">\n                    <span [class]="collapsed ? expandIcon : collapseIcon"></span>\n                </a>\n            </div>\n            <div [attr.id]="id + \'-content\'" class="ui-panel-content-wrapper" [@panelContent]="collapsed ? {value: \'hidden\', params: {transitionParams: transitionOptions}} : {value: \'visible\', params: {transitionParams: transitionOptions}}" (@panelContent.done)="onToggleDone($event)"\n                [ngClass]="{\'ui-panel-content-wrapper-overflown\': collapsed||animating}"\n                role="region" [attr.aria-hidden]="collapsed" [attr.aria-labelledby]="id + \'-label\'">\n                <div class="ui-panel-content ui-widget-content">\n                    <ng-content></ng-content>\n                </div>\n                \n                <div class="ui-panel-footer ui-widget-content" *ngIf="footerFacet">\n                    <ng-content select="p-footer"></ng-content>\n                </div>\n            </div>\n        </div>\n    ',animations:[a.trigger("panelContent",[a.state("hidden",a.style({height:"0",opacity:0})),a.state("visible",a.style({height:"*",opacity:1})),a.transition("visible <=> hidden",a.animate("{{transitionParams}}"))])]}),i("design:paramtypes",[r.ElementRef])],e)}();t.Panel=d;var u=function(){function e(){}return e=n([r.NgModule({imports:[s.CommonModule],exports:[d,l.SharedModule],declarations:[d]})],e)}();t.PanelModule=u},"12Ed":function(e,t){e.exports='\x3c!-- <mat-vertical-stepper (selectionChange)="selectionChange($event)"\r\n  #stepper>\r\n  <mat-step *ngFor="let tab of options.sections; let index = index; let last = last">\r\n    <ng-template matStepLabel>{{ tab.name }}\r\n      <div class="tab-description"\r\n        *ngIf="tab.description">\r\n        {{ tab.description }}\r\n      </div>\r\n    </ng-template>\r\n    <div class="col-lg-12">\r\n\r\n    </div>\r\n  </mat-step>\r\n</mat-vertical-stepper> --\x3e\r\n<div class="col-12 row survey-question">\r\n  <div class="col-3 survey-question-left">\r\n    <ul class="list-group">\r\n      <li class="list-group-item" (click)="selectSection(s)"\r\n        [ngClass]="{\'active\': (activeSection && activeSection.section.code === s.section.code)}"\r\n        *ngFor="let s of sections; let index = index; let last = last">\r\n        {{ s.name }}\r\n      </li>\r\n    </ul>\r\n  </div>\r\n  <div class="col-9 survey-question-right" *ngIf="activeSection">\r\n    <div *ngIf="activeSection.section.is_page.uid === \'Yes\'; else surveyform">\r\n      <zc-page-render *ngIf="pageInfo" [options]="{ widgets: pageInfo }"></zc-page-render>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #surveyform>\r\n  \x3c!-- <form [formGroup]="form" (ngSubmit)="submit()" *ngIf="!loadingForm && fields.length>0" >\r\n    <formly-form [model]="model" [fields]="fields" [form]="form"  [options]="formlyOptions"></formly-form>\r\n    <button type="submit" class="btn btn-primary submit-button" >Submit</button>\r\n  </form> --\x3e\r\n  <form [formGroup]="form" *ngIf="!loadingForm">\r\n    <formly-form [model]="model" [fields]="fields" [form]="form" [options]="formlyOptions"></formly-form>\r\n    <div *ngIf="!surveyS.viewMode">\r\n      <button type="button" class="btn btn-primary submit-button" (click)="submit(\'save\')">Save</button> &nbsp;\r\n      <button type="button" class="btn btn-primary submit-button" (click)="submit(\'submit\')">Save & Submit</button>\r\n    </div>\r\n\r\n  </form>\r\n</ng-template>'},"5A+k":function(e,t){e.exports=""},"5vJ0":function(e,t){e.exports=".survey-question {\n  margin: 0;\n  padding: 0; }\n  .survey-question .survey-question-left {\n    padding-left: 0; }\n  .survey-question .survey-question-right {\n    padding-right: 0; }\n"},GHtb:function(e,t){e.exports='<div class="table-group-action text-right" *ngIf="to.viewMode !== true">\r\n  <a (click)="openModal(\'add\', zcFormModal)" class="btn btn-outline-primary">Add</a>\r\n</div>\r\n<p-table class="zc-new-table" [columns]="colums" [value]="this.formControl.value || []">\r\n  <ng-template pTemplate="header" let-columns>\r\n    <tr>\r\n      <th *ngFor="let col of columns" [ngClass]="col.label">\r\n        {{col.label}}\r\n      </th>\r\n      <th *ngIf="to.viewMode !== true" style="width: 100px;">\r\n        Actions\r\n      </th>\r\n    </tr>\r\n  </ng-template>\r\n  <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">\r\n    <tr>\r\n      <td *ngFor="let col of columns" class="text-center" [ngClass]="col.label">\r\n        {{rowData[col.name]}}\r\n      </td>\r\n      <td class="text-center table-view-actions" *ngIf="to.viewMode !== true">\r\n        <i class="icon icon-delete p-2" (click)="delete(rowIndex)"></i>\r\n        <i class="icon icon-edit" (click)="openModal(\'edit\', zcFormModal,rowIndex)"></i>\r\n      </td>\r\n    </tr>\r\n  </ng-template>\r\n  <ng-template pTemplate="emptymessage" let-columns>\r\n\r\n    <tr class="text-center">\r\n      <td [attr.colspan]="(to.viewMode)?columns.length:columns.length+1">\r\n        {{ to.noDataText || \'No records found\' }}\r\n      </td>\r\n    </tr>\r\n  </ng-template>\r\n</p-table>\r\n\r\n<ng-template #zcFormModal let-c="close" let-d="dismiss">\r\n\r\n  <div class="modal-header">\r\n    <h4 class="modal-title" id="modal-basic-title">{{to.label}}</h4>\r\n    <button type="button" class="close" title="Close" aria-label="Close" (click)="modal.dismiss(\'Cross click\')">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div class="modal-body">\r\n    <form [formGroup]="tForm" >\r\n      <formly-form class="row" [model]="tModel" [fields]="formField" [options]="tOptions" [form]="tForm"></formly-form>\r\n    </form>\r\n  </div>\r\n  <div class="modal-footer">\r\n    <button type="submit" class="btn btn-primary submit-button" (click)="submit()" [disabled]="!tForm.valid">{{submitLabel}}</button>\r\n  </div>\r\n</ng-template>'},Kd66:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var o in e)t.hasOwnProperty(o)||(t[o]=e[o])}(o("/gwa"))},YKCu:function(e,t,o){"use strict";o.r(t);var n=o("D57K"),i=o("LoAr"),r=o("IfiR"),s=o("05nE"),l=function(){function e(){this.viewMode=!1}return e.prototype.surveryQuestionsToFormlyFields=function(e,t,o){var n=this;console.log("model --\x3e",o);var i=[];return e.subSections&&e.subSections.forEach(function(e){var r=e.profile_window_questions.map(function(e){return n.questionToField(e,t,o)}),s={wrappers:["panel"],fieldGroupClassName:"row",templateOptions:{label:e.name,help:e.help},fieldGroup:r};i.push(s)}),i},e.prototype.questionToField=function(e,t,o){var n=this;try{e.display_rules&&"string"==typeof e.display_rules&&(e.display_rules=JSON.parse(e.display_rules));var i="text",r="col-6",l=e.question.code||"dummy";if(e.display_type&&"matrix"===e.display_type.uid)l=null,i="matrix",r="col-12";else if(e.display_type&&"custom"===e.display_type.uid){l="custom_"+e.uid;var a="fraction";e.display_rules.style&&e.display_rules.style.type&&e.display_rules.style.type.uid&&(a=e.display_rules.style.type.uid),i=a,console.log("questionKey",l,e.display_rules)}else e.display_type&&"table"===e.display_type.uid?(i="table",r="col-12"):(i=e.question.type.uid,r="col-6");var c={key:l,type:i||"text",className:r,templateOptions:{label:e.name,help:e.help},wrappers:["vertical"]};if("percentage"===i&&(c.wrappers=["vertical","addons"]),"table"===i&&e.matrix_config){var d=void 0;d="string"==typeof e.matrix_config?JSON.parse(e.matrix_config):e.matrix_config,c.templateOptions.matrix_config=d,c.key=d.name}if(e&&(c.templateOptions.question=e.question),e.display_rules&&(e.display_rules.properties&&((0===e.display_rules.properties.defaultValue||e.display_rules.properties.defaultValue)&&(c.defaultValue=e.display_rules.properties.defaultValue),Object.assign(c.templateOptions,e.display_rules.properties),e.display_rules.properties.className&&(c.className=c.className+" "+e.display_rules.properties.className)),c.templateOptions.uid=e.uid,e.display_rules)){if(c.templateOptions.display_rules=e.display_rules,e.display_rules.validations){var u=e.display_rules.validations,p=!!u.required&&u.required;c.templateOptions.required=p,(u.min||"0"==u.min)&&(c.templateOptions.min=u.min),(u.max||"0"==u.max)&&(c.templateOptions.max=u.max),(u.minLength||u.maxLength)&&((u.minLength||"0"==u.minLength)&&(c.templateOptions.minLength=u.minLength),(u.maxLength||"0"==u.maxLength)&&(c.templateOptions.maxLength=u.maxLength)),e.display_rules.validations.readonly&&(c.templateOptions.readonly=u.readonly),u.pattern&&(c.templateOptions.pattern=u.pattern),u.rules&&console.log("_validations.rules",u.rules)}if(e.display_rules.messages&&(c.validation={messages:e.display_rules.messages||{}}),e.display_rules.conditions){var m=e.display_rules.conditions;m.hidden&&m.hidden.expression&&(c.hideExpression=function(e,o){var i=s.o.evalFun(n.conversionExpression(m.hidden.expression),{form:t,model:e,$:e},!0);if(i){var r=c.key;t.get(r)&&c.formControl.setValue(null)}return i})}if(e.display_rules.prefillValue&&e.display_rules.prefillValue.expression){var f=s.o.evalFun(this.conversionExpression(e.display_rules.prefillValue.expression),{form:t,model:o,$:o},!0);this.isFloat(f)&&(f=parseFloat(f.toFixed(2))),c.defaultValue=f,c.hooks={onInit:function(t){n.setFieldPrefillValue(e,t)}}}e.display_rules.style&&(e.display_rules.style.hideTitle&&(c.templateOptions.hideLabel=!0),e.display_rules.style.displayFormat&&(c.templateOptions.displayFormat=e.display_rules.style.displayFormat),e.display_rules.style.layout&&e.display_rules.style.layout.uid&&(c.className=e.display_rules.style.layout.uid,e.display_rules.style.hideTitle&&e.display_type&&"matrix"!==e.display_type.uid&&(c.className=c.className+" pt-20")),e.display_rules.style.class&&(c.className=c.className+" "+e.display_rules.style.class))}if(this.viewMode&&(c.templateOptions.viewMode=!0),e.display_type&&"matrix"===e.display_type.uid&&e.matrix_config){d=JSON.parse(e.matrix_config);Object.assign(c.templateOptions,d)}return c}catch(h){return{type:"text",templateOptions:{}}}},e.prototype.setFieldPrefillValue=function(e,t){var o=this;if(e.display_rules.prefillValue.expression){var n=e.display_rules.prefillValue;n.questions&&n.questions.length>0&&n.questions.forEach(function(e){if(e.question&&e.question.code){var i=void 0;if(t.form.get(e.question.code))i=t.form.get(e.question.code);else if(t.parent&&t.parent.fieldGroup){var r=t.parent.fieldGroup.find(function(t){return t.key===e.question.code});r.formControl&&(i=r.formControl)}i&&i.valueChanges.subscribe(function(e){var i=s.o.evalFun(o.conversionExpression(n.expression),{form:t.form,model:t.model,$:t.model},!0);o.isFloat(i)&&(i=parseFloat(i.toFixed(2))),t.formControl.setValue(i)})}})}},e.prototype.conversionExpression=function(e){return e.replace(/\$/g,"model.")},e.prototype.isFloat=function(e){return!!(e%1)},e=n.c([Object(i.Injectable)({providedIn:"root"}),n.f("design:paramtypes",[])],e)}(),a=o("vtXP"),c=function(){function e(e,t,o){this.surveyS=e,this.http=t,this.actionService=o,this.loadingForm=!0,this.form=new r.FormGroup({}),this.model={},this.profileYear={},this.formlyOptions={formState:{submitted:!1}},this.sections=[],this.fields=[]}return e.prototype.ngOnInit=function(){this.getSections()},e.prototype.getSections=function(){var e=this,t={};zc.params.uid&&(t.pwi=zc.params.uid),zc.queryParams&&zc.queryParams.institution&&(t.institution={uid:zc.queryParams.institution});this.http.post("api/zcn_profile_window_section/list/at_widget",t).subscribe(function(t){e.sections=t.data.listData.rows,e.sections[0]&&e.selectSection(e.sections[0])})},e.prototype.selectSection=function(e){this.activeSection=e,"Yes"===e.section.is_page.uid?this.loadPage(e):this.getSubSections(e)},e.prototype.loadPage=function(e){var t=this;this.pageInfo=null;var o=e.page_code;o=-1!==o.indexOf("/")?"page/"+o:"page/_/_/"+o,this.http.get(o).pipe(Object(a.a)(function(e){return e.data})).subscribe(function(e){e.instructions.definition&&e.instructions.definition.widgets&&(t.pageInfo=e.instructions.definition.widgets)})},e.prototype.getSubSections=function(e){var t=this,o={};o.uid=e.uid;this.http.post("api/zcn_profile_window_sub_section/list/profile-window-subsection-list",o).subscribe(function(o){var n=o.data.listData.rows;e.subSections=n,t.loadQuestions(e)})},e.prototype.loadQuestions=function(e){var t=this;this.loadingForm=!0,this.form=new r.FormGroup({}),this.formlyOptions={formState:{submitted:!1}},this.model={};var o={};zc.wdWindowDetails.model&&zc.wdWindowDetails.model.profile_window&&(this.profileYear=zc.wdWindowDetails.model.profile_window.profile_year,o.profile_year=zc.wdWindowDetails.model.profile_window.profile_year,this.formlyOptions.formState.currentProfileYear=o.profile_year);var n=JSON.parse(JSON.stringify(e));this.surveyS.viewMode=!1;try{e.profile_window.profile_windows_institutions.institution_profile_section_owners.submitted&&"Yes"===e.profile_window.profile_windows_institutions.institution_profile_section_owners.submitted.uid?this.surveyS.viewMode=!0:this.options.viewMode&&(this.surveyS.viewMode=s.o.evalFun(this.options.viewMode,{},!0)),"true"===zc.queryParams.edit&&(this.surveyS.viewMode=!1)}catch(i){}zc.queryParams&&zc.queryParams.institution&&(o.institution={uid:zc.queryParams.institution}),this.http.post("api/zcn_"+this.activeSection.section.code+"/list",o).subscribe(function(e){if(e.data&&e.data.listData&&e.data.listData.rows&&e.data.listData.rows.length>0){var o=e.data.listData.rows;t.formlyOptions.formState.profileYears=o;var i=o.filter(function(e){return e.profile_year.uid===t.profileYear.uid});i[0]?(t.model=i[0],t.fields=t.surveyS.surveryQuestionsToFormlyFields(n,t.form,t.model)):t.fields=t.surveyS.surveryQuestionsToFormlyFields(n,t.form,t.model)}else t.fields=t.surveyS.surveryQuestionsToFormlyFields(n,t.form,t.model);t.loadingForm=!1},function(e){t.loadingForm=!1,t.fields=t.surveyS.surveryQuestionsToFormlyFields(n,t.form,t.model)})},e.prototype.focusOnField=function(e){try{for(var t=0;t<Object.keys(e).length;t++){var o=Object.keys(e),n=e[o[t]];if(n.controls)this.focusOnField(n.controls);else if(n.invalid)return document.getElementById(o[t]).focus(),!1}}catch(r){var i=document.getElementsByClassName("field-error-message");i.length>0&&i[0].scrollIntoView(),console.log("error",r)}},e.prototype.submit=function(e){var t=this;if(this.formlyOptions.formState.submitted=!0,this.form.invalid&&this.focusOnField(this.form.controls),this.form.valid){console.log("model",this.model);var o=this.model;zc.wdWindowDetails.model&&zc.wdWindowDetails.model.profile_window&&(o.profile_year=zc.wdWindowDetails.model.profile_window.profile_year),o.section=this.activeSection,o.submitted="submit"===e,this.http.post("api/zcn_"+this.activeSection.section.code+"/save-update",o).subscribe(function(o){console.log("Section save response"),"submit"===e&&zc.queryParams&&!zc.queryParams.edit&&(t.activeSection.profile_window={profile_windows_institutions:{institution_profile_section_owners:{submitted:{uid:"Yes"}}}},t.loadQuestions(t.activeSection)),t.options.onSuccess&&t.options.onSuccess.length>0&&t.actionService.onSuccess(t.options.onSuccess,t.model)})}},n.c([Object(i.Input)(),n.f("design:type",Object)],e.prototype,"options",void 0),e=n.c([Object(i.Component)({selector:"zc-survey-questions",template:o("12Ed"),styles:[o("5vJ0")]}),n.f("design:paramtypes",[l,s.c,s.a])],e)}(),d=o("eQXH"),u=o("WT9V"),p=o("r1BU"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this.to.type||"text"},enumerable:!0,configurable:!0}),t=n.c([Object(i.Component)({selector:"formly-field-input",template:'\n    <input\n      *ngIf="type !== \'number\'; else numberTmp"\n      [type]="type"\n      [id]="field.key"\n      [formControl]="formControl"\n      class="form-control"\n      [formlyAttributes]="field"\n      [class.is-invalid]="showError"\n    />\n    <ng-template #numberTmp>\n      <input\n        type="number"\n        [pattern]="\'^[0-9.]*$\'" zcPattern\n        [zcPatternRegex]="\'^[0-9.]*$\'"\n        [id]="field.key"\n        [formControl]="formControl"\n        class="form-control"\n        [formlyAttributes]="field"\n        [class.is-invalid]="showError"\n      />\n    </ng-template>\n  ',changeDetection:i.ChangeDetectionStrategy.OnPush,styles:[".form-control[readonly] { background-color: #e9ecef !important;cursor: not-allowed; pointer-events: none;}",".form-control[readonly].is-invalid { border-color:transparent !important;background-image:none !important;}","input::-webkit-outer-spin-button,input::-webkit-inner-spin-button {-webkit-appearance: none;margin: 0;}","input[type = number] { -moz-appearance: textfield;}"]})],t)}(p.a),f=function(){function e(e){this.el=e,this.specialKeys=["Backspace","Tab","ArrowLeft","ArrowRight","ctrlKey"]}return e.prototype.onKeyDown=function(e){if(this.regex=new RegExp(this.zcPatternRegex),this.regex){if(-1!==this.specialKeys.indexOf(e.key))return;var t=this.el.nativeElement.value.concat(e.key);t&&!String(t).match(this.regex)&&e.preventDefault()}},n.c([Object(i.Input)(),n.f("design:type",Object)],e.prototype,"zcPatternRegex",void 0),n.c([Object(i.HostListener)("keydown",["$event"]),n.f("design:type",Function),n.f("design:paramtypes",[KeyboardEvent]),n.f("design:returntype",void 0)],e.prototype,"onKeyDown",null),e=n.c([Object(i.Directive)({selector:"[zcPattern]"}),n.f("design:paramtypes",[i.ElementRef])],e)}();function h(e,t){var o=e.value;return"number"==typeof o&&(o=o.toString()),!t.templateOptions.maxLength||!o||o.length<=t.templateOptions.maxLength}function g(e,t){var o=e.value;return"number"==typeof o&&(o=o.toString()),!t.templateOptions.minLength||!o||o.length>=t.templateOptions.minLength}var y=function(){function e(){}return e=n.c([Object(i.NgModule)({declarations:[m,f],imports:[u.CommonModule,r.ReactiveFormsModule,p.e.forChild({types:[{name:"input",component:m,wrappers:["form-field"]},{name:"string",extends:"input"},{name:"text",extends:"input"},{name:"number",extends:"input",defaultOptions:{validators:{maxLength:{expression:h},minLength:{expression:g}},validation:{},templateOptions:{type:"number",addonRight:{text:"%"}}}},{name:"integer",extends:"input",defaultOptions:{defaultValue:0,templateOptions:{type:"number"}}},{name:"percentage",extends:"input",defaultOptions:{defaultValue:0,templateOptions:{type:"number",addonRight:{text:"%"}}}},{name:"fraction",extends:"input",defaultOptions:{defaultValue:0,templateOptions:{type:"number",thousandSeparator:!0,displayType:"currency",currency:"INR"}}},{name:"undefined",extends:"input",defaultOptions:{templateOptions:{type:"number"}}},{name:"email",extends:"input",defaultOptions:{templateOptions:{type:"email",pattern:"^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$"}}}]})]})],e)}(),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultOptions={templateOptions:{cols:1,rows:1}},t}return n.d(t,e),t=n.c([Object(i.Component)({selector:"formly-field-textarea",template:'\n    <textarea\n      [formControl]="formControl"\n      [cols]="to.cols"\n      [rows]="to.rows"\n      class="form-control"\n      [class.is-invalid]="showError"\n      [formlyAttributes]="field"\n    >\n    </textarea>\n  ',changeDetection:i.ChangeDetectionStrategy.OnPush})],t)}(p.a),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),n.c([Object(i.ViewChild)("fieldComponent",{read:i.ViewContainerRef}),n.f("design:type",i.ViewContainerRef)],t.prototype,"fieldComponent",void 0),t=n.c([Object(i.Component)({selector:"formly-wrapper-form-field",template:'\n     <div class="form-group row">\n      <label [attr.for]="id" class="col-sm-2 col-form-label" *ngIf="to.label">\n        {{ to.label }}\n        <ng-container *ngIf="to.required && to.hideRequiredMarker !== true">*</ng-container>\n      </label>\n      <div class="col-sm-7">\n        <ng-template #fieldComponent></ng-template>\n      </div>\n\n      \x3c!-- <div *ngIf="showError" class="col-sm-3 invalid-feedback d-block">\n        <formly-validation-message [field]="field"></formly-validation-message>\n      </div> --\x3e\n    </div>\n  ',changeDetection:i.ChangeDetectionStrategy.OnPush})],t)}(p.b),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),n.c([Object(i.ViewChild)("fieldComponent",{read:i.ViewContainerRef}),n.f("design:type",i.ViewContainerRef)],t.prototype,"fieldComponent",void 0),t=n.c([Object(i.Component)({selector:"formly-panel-field",template:'\n <p-panel>\n <p-header>\n <div class="custom-panel-header">\n  <span>{{to.label}}</span>\n  <a class="icon-question-circle" *ngIf="to.help" (click)="isHelpShow = !isHelpShow"></a>\n </div>\n <div class="help-text-block" *ngIf="isHelpShow" [innerHTML]="to.help"></div>\n </p-header>\n <ng-container #fieldComponent></ng-container>\n</p-panel>\n      \x3c!-- <div class="card">\n      <h3 class="card-header">{{ to.label }}</h3>\n      <div class="card-body">\n       \n      </div>\n    </div> --\x3e\n  ',styles:["\n    .help-text-block {\n      border: 2px solid #c1c7ca;\n      background-color: #fff;\n      padding: 10px;\n      color: #000;\n    }\n  "]})],t)}(p.b),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),n.c([Object(i.ViewChild)("fieldComponent",{read:i.ViewContainerRef}),n.f("design:type",i.ViewContainerRef)],t.prototype,"fieldComponent",void 0),t=n.c([Object(i.Component)({selector:"formly-horizontal-field",template:'\n     <div class="form-group row">\n      <label [attr.for]="id" class="col-sm-2 col-form-label" *ngIf="to.label">\n        {{ to.label }}\n        <ng-container *ngIf="to.required && to.hideRequiredMarker !== true">*</ng-container>\n      </label>\n      <div class="col-sm-7">\n        <ng-template #fieldComponent></ng-template>\n      </div>\n      <div *ngIf="showError" class="col-sm-3 invalid-feedback d-block">\n        <formly-validation-message [field]="field"></formly-validation-message>\n      </div>\n    </div>\n  '})],t)}(p.b),_=o("981U"),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.viewMode=!1,t.myExtraModules=[u.CommonModule,s.n,_.RouterModule],t}return n.d(t,e),t.prototype.ngOnInit=function(){this.zc=zc,"boolean"===this.field.type||"table"===this.field.type||"matrix"===this.field.type?this.viewMode=!1:this.to.viewMode&&(this.viewMode=!0)},t.prototype.showErr=function(e){return e.formControl&&e.formControl.invalid},n.c([Object(i.ViewChild)("fieldComponent",{read:i.ViewContainerRef}),n.f("design:type",i.ViewContainerRef)],t.prototype,"fieldComponent",void 0),t=n.c([Object(i.Component)({selector:"formly-vertical-field",template:'\n     <div class="form-group">\n      <label [attr.for]="id" class="col-12 col-form-label" *ngIf="to.label && to.hideLabel !== true">\n        <span class="col-form-label-left">{{ to.label }}\n        <ng-container *ngIf="to.required && to.hideRequiredMarker !== true && !viewMode"><span class="required-star">*</span></ng-container>\n        </span>\n        \x3c!--<i class="icon icon-info" *ngIf="to.help" [matTooltip]="to.help" (click)="isHelpShow = !isHelpShow"></i>--\x3e\n        <a class="icon-question-circle" *ngIf="to.help" (click)="isHelpShow = !isHelpShow"></a>\n      </label>\n      <div class="help-text-block" *ngIf="isHelpShow" [innerHTML]="to.help"></div>\n      <div class="col-12" [ngClass]="{\'d-none\': viewMode}" > \n        <ng-template #fieldComponent></ng-template>\n      </div>\n      <div class="col-12" *ngIf="viewMode"> \n          <span *ngIf="!to.displayFormat" zcFieldValueFormat [type]="field.type" [properties]="to" [value]="formControl.value"></span>\n            <ng-template\n          *ngIf="to.displayFormat"\n          dynamic-template\n          [extraModules]="[myExtraModules]"\n          [template]="to.displayFormat"\n          [context]="{ model: model, item: model, value: formControl.value, zc: zc}"\n        ></ng-template>\n      </div>\n      <div *ngIf="showError && formControl.invalid && !viewMode" class="col-12 invalid-feedback d-block field-error-message">\n        <formly-validation-message  #validationMessage [field]="field"></formly-validation-message>\n      </div>\n    </div>\n  ',styles:["\n  .help-text-block {\n    color: #000;\n  }\n"]})],t)}(p.b),O=o("Kd66"),S=o("SECt"),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.addonRightClick=function(e){this.to.addonRight.onClick&&this.to.addonRight.onClick(this.to,this,e)},t.prototype.addonLeftClick=function(e){this.to.addonLeft.onClick&&this.to.addonLeft.onClick(this.to,this,e)},n.c([Object(i.ViewChild)("fieldComponent",{read:i.ViewContainerRef}),n.f("design:type",i.ViewContainerRef)],t.prototype,"fieldComponent",void 0),t=n.c([Object(i.Component)({selector:"addons",template:'\n    <div class="input-group">\n  <div\n    class="input-group-prepend"\n    *ngIf="to.addonLeft"\n    [ngStyle]="{ cursor: to.addonLeft.onClick ? \'pointer\' : \'inherit\' }"\n    (click)="addonLeftClick($event)"\n  >\n    <i class="input-group-text" [ngClass]="to.addonLeft.class" *ngIf="to.addonLeft.class"></i>\n    <span *ngIf="to.addonLeft.text" class="input-group-text">{{ to.addonLeft.text }}</span>\n  </div>\n  <div class="input-addons">\n    <ng-container #fieldComponent></ng-container>\n  </div>\n  <div\n    class="input-group-append"\n    *ngIf="to.addonRight"\n    [ngStyle]="{ cursor: to.addonRight.onClick ? \'pointer\' : \'inherit\' }"\n    (click)="addonRightClick($event)"\n  >\n    <i class="input-group-text" [ngClass]="to.addonRight.class" *ngIf="to.addonRight.class"></i>\n    <span *ngIf="to.addonRight.text" class="input-group-text">{{ to.addonRight.text }}</span>\n  </div>\n</div>\n  ',changeDetection:i.ChangeDetectionStrategy.OnPush})],t)}(p.b),I=o("87bh"),F=function(){function e(){}return e=n.c([Object(i.NgModule)({declarations:[b,w,C,x,k],imports:[u.CommonModule,r.ReactiveFormsModule,S.a,O.PanelModule,s.n,I.NgxDynamicTemplateModule,p.e.forChild({wrappers:[{name:"form-field",component:b},{name:"horizontal",component:w},{name:"vertical",component:x},{name:"panel",component:w},{name:"addons",component:k}]})]})],e)}(),q=function(){function e(){}return e=n.c([Object(i.NgModule)({declarations:[v],imports:[u.CommonModule,r.ReactiveFormsModule,F,p.e.forChild({types:[{name:"textarea",component:v,wrappers:["form-field"]}]})]})],e)}(),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultOptions={defaultValue:!1,templateOptions:{indeterminate:!0,hideLabel:!0,formCheck:"custom"}},t}return n.d(t,e),t.prototype.ngOnInit=function(){null===this.formControl.value&&this.formControl.setValue(!1)},t=n.c([Object(i.Component)({selector:"formly-field-checkbox",template:'\n    <div\n      [ngClass]="{\n        \'form-check\': to.formCheck.indexOf(\'custom\') === -1,\n        \'form-check-inline\': to.formCheck === \'inline\',\n        \'custom-control\': to.formCheck.indexOf(\'custom\') === 0,\n        \'custom-checkbox\': to.formCheck === \'custom\' || to.formCheck === \'custom-inline\',\n        \'custom-control-inline\': to.formCheck === \'custom-inline\',\n        \'custom-switch\': to.formCheck === \'custom-switch\'\n      }"\n    >\n      <input *ngIf="!to.viewMode"\n        type="checkbox"\n        [class.is-invalid]="showError"\n        [class.form-check-input]="to.formCheck.indexOf(\'custom\') === -1"\n        [class.position-static]="to.formCheck === \'nolabel\'"\n        [class.custom-control-input]="to.formCheck.indexOf(\'custom\') === 0"\n        [indeterminate]="to.indeterminate && formControl.value == null"\n        [formControl]="formControl"\n        [formlyAttributes]="field"\n      />\n\n      <input *ngIf="to.viewMode"\n        type="checkbox"\n        [class.is-invalid]="showError"\n        [class.form-check-input]="to.formCheck.indexOf(\'custom\') === -1"\n        [class.position-static]="to.formCheck === \'nolabel\'"\n        [class.custom-control-input]="to.formCheck.indexOf(\'custom\') === 0"\n        [indeterminate]="to.indeterminate && formControl.value == null"\n        [formControl]="formControl"\n        [formlyAttributes]="field" disabled\n      />\n\n      <label\n        *ngIf="to.formCheck !== \'nolabel\'"\n        [for]="id"\n        [class.form-check-label]="to.formCheck.indexOf(\'custom\') === -1"\n        [class.custom-control-label]="to.formCheck.indexOf(\'custom\') === 0"\n      >\n        {{ to.label }}\n        <span *ngIf="to.required && to.hideRequiredMarker !== true">*</span>\n      </label>\n    </div>\n  ',changeDetection:i.ChangeDetectionStrategy.OnPush})],t)}(p.a),P=function(){function e(){}return e=n.c([Object(i.NgModule)({declarations:[M],imports:[u.CommonModule,r.ReactiveFormsModule,F,p.e.forChild({types:[{name:"checkbox",component:M,wrappers:["form-field"]},{name:"boolean",extends:"checkbox"}]})]})],e)}(),T=o("oEoX"),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultOptions={templateOptions:{options:[],formCheck:"custom"}},t}return n.d(t,e),t=n.c([Object(i.Component)({selector:"formly-field-radio",template:'\n    <div>\n      <div\n        *ngFor="let option of to.options | formlySelectOptions: field | async; let i = index"\n        [ngClass]="{\n          \'form-check\': to.formCheck.indexOf(\'custom\') === -1,\n          \'form-check-inline\': to.formCheck === \'inline\',\n          \'custom-control custom-radio\': to.formCheck.indexOf(\'custom\') === 0,\n          \'custom-control-inline\': to.formCheck === \'custom-inline\'\n        }"\n      >\n        <input\n          type="radio"\n          [id]="id + \'_\' + i"\n          [class.form-check-input]="to.formCheck.indexOf(\'custom\') === -1"\n          [class.custom-control-input]="to.formCheck.indexOf(\'custom\') === 0"\n          [name]="field.name || id"\n          [class.is-invalid]="showError"\n          [attr.value]="option.value"\n          [value]="option.value"\n          [formControl]="formControl"\n          [formlyAttributes]="field"\n        />\n        <label\n          [class.form-check-label]="to.formCheck.indexOf(\'custom\') === -1"\n          [class.custom-control-label]="to.formCheck.indexOf(\'custom\') === 0"\n          [for]="id + \'_\' + i"\n        >\n          {{ option.label }}\n        </label>\n      </div>\n    </div>\n  ',changeDetection:i.ChangeDetectionStrategy.OnPush})],t)}(p.a),j=function(){function e(){}return e=n.c([Object(i.NgModule)({declarations:[E],imports:[u.CommonModule,r.ReactiveFormsModule,F,T.a,p.e.forChild({types:[{name:"radio",component:E,wrappers:["form-field"]}]})]})],e)}(),z=function(e){function t(t,o,n,i){var r=e.call(this)||this;return r.sueveyS=t,r.formlyBuilder=o,r.formlyConfig=n,r.currencyPipe=i,r.columns=[],r.rowColumns=[],r.questionFields=[],r.showThousandSeparator=!1,r}return n.d(t,e),t.prototype.ngOnInit=function(){var e=this;this.dummyErrorKey="dummy_error_"+this.to.uid,this.getColums(),this.formlyFieldGroups();var t=this.field;t.templateOptions.display_rules&&t.templateOptions.display_rules.validations&&t.templateOptions.display_rules.validations.rules&&t.templateOptions.display_rules.validations.rules.length>0&&this.formControl.valueChanges.subscribe(function(t){e.checkError()}),this.checkError()},t.prototype.prePopulate=function(e){var t=this;if(!e.fieldGroup){e.templateOptions.questions||(e.templateOptions.questions=[]);e.templateOptions&&e.templateOptions.required;var o=e.templateOptions.questions,n=[];this.dummyErrorKey="dummy_error_"+e.templateOptions.uid,n.push({key:this.dummyErrorKey,type:"number",templateOptions:{className:"col-12"}}),o&&(o.forEach(function(o){if(o.question){o.code=o.question.code,o.question.type&&"fraction"===o.question.type.uid&&(t.showThousandSeparator=!0),o.question.type&&"percentage"===o.question.type.uid&&(o.question.type.uid="fraction");var i=t.sueveyS.questionToField(o,e.form,e.model);i.className="table-field","number"===i.type&&(i.defaultValue=0),n.push(i)}}),n.push({key:"dummy",type:"number",wrappers:["vertical"],templateOptions:{className:"col-12 hidden"},hide:!0})),e.fieldGroup=n}},t.prototype.getField=function(e,t){try{var o;if(!this.to.show_historical_data)return(o=t.column?this.getQuestion(t.column,t,e):this.getQuestion(t,null,e))?this.field.fieldGroup.find(function(e){return e.key===o.code}):this.field.fieldGroup.find(function(e){return"dummy"===e.key})}catch(n){return console.log("-----field",n),this.field.fieldGroup.find(function(e){return"dummy"===e.key})}},t.prototype.getColums=function(){var e=this;if(this.to.columns&&this.to.columns.length>0&&!this.to.show_historical_data){this.to.columns.unshift({name:this.to.heading||"Title",code:"_heading_"});var t=[],o=this.to.columns.map(function(o){if(o.colSpan=1,o.rowSpan=1,e.to.sub_columns){var n=e.to.sub_columns.filter(function(e){return o.code===e.column.code});n.length>0?(o.colSpan=n.length,e.rowColumns=e.rowColumns.concat(n),t=t.concat(n)):("_heading_"!==o.code&&e.rowColumns.push(o),o.rowSpan=2)}else"_heading_"!==o.code&&e.rowColumns.push(o);return o});this.columns.push(o),this.to.sub_columns&&this.columns.push(t)}else this.to.show_historical_data&&this.prepareColumns()},t.prototype.formlyFieldGroups=function(){var e=this;this.to.rows&&this.to.rows.length&&(this.to.show_historical_data||this.to.rows.map(function(t,o){if(t.hsum=function(e,t,o){var n=0;if(t)return t.forEach(function(t){var i;t.column&&e[t.column.code][t.code]&&e[t.column.code][t.code].qCode?i=e[t.column.code][t.code].qCode:e[t.code]&&e[t.code].qCode&&(i=e[t.code].qCode);var r=o[i]||0;n+=r}),n},e.rowColumns)try{e.rowColumns.map(function(o){var n;return(n=o.column?e.to.questions.find(function(e){return e.column.code===o.column.code&&e.sub_column.code===o.code&&e.row.code===t.code}):e.to.questions.find(function(e){return e.column.code===o.code&&e.row.code===t.code}))&&(o.column?(t[o.column.code]||(t[o.column.code]={}),t[o.column.code][o.code]={question:n,qCode:n.code}):t[o.code]={question:n,qCode:n.code}),o.vsum=function(e,t,o){var n=0;return e.forEach(function(e){var i;i=t.column?e[t.column.code][t.code].qCode:e[t.code]&&e[t.code].qCode?e[t.code].qCode:"";var r=0;o&&o[i]&&(r=o[i]),n+=r}),n},o})}catch(n){console.log("error--rowColumns",n)}}))},t.prototype.getQuestion=function(e,t,o){var n={};try{if(this.to.questions)for(var i=0;i<this.to.questions.length;i++){var r=this.to.questions[i];r.sub_column&&r.sub_column.code?n[r.column.code+"_"+r.sub_column.code+"_"+r.row.code]=r.question:n[r.column.code+"_"+r.row.code]=r.question}return t&&t.code?n[e.code+"_"+t.code+"_"+o.code]:n[e.code+"_"+o.code]}catch(s){}},t.prototype.getQuestionsByCode=function(){var e={};if(this.to.questions)for(var t=0;t<this.to.questions.length;t++){var o=this.to.questions[t];o.sub_column&&o.sub_column.code?e[o.column.code+"_"+o.sub_column.code+"_"+o.row.code]=o.question:e[o.column.code+"_"+o.row.code]=o.question}return e},t.prototype.conversionExpression=function(e){return e.replace(/\$/g,"model.")},t.prototype.convertToThousands=function(e){return this.showThousandSeparator?this.currencyPipe.transform(e,"INR"," "):e},t.prototype.prepareColumns=function(){var e=this;this.columns=[],this.rowColumns=[];var t=JSON.parse(JSON.stringify(this.to));if(console.log("templateOptions --\x3e",t),t.show_historical_data){var o=[],n=[],i=this.formState.profileYears,r=this.formState.currentProfileYear,s=t.columns&&t.columns.length>0?t.columns.length:1;if(o.push({name:this.to.heading||"Title",code:"_heading_",rowSpan:s}),i&&i.length>0){var l=i.filter(function(e){return e.profile_year.uid!==r.uid}).map(function(o){if(o.isCurrentProfile=!1,o.name=o.profile_year.name,o.code=o.profile_year.name,o.colSpan=1,o.rowSpan=1,t.columns&&t.columns.length>0){var i=e.clone(t.columns);i.map(function(e){return e.column=o,e}),o.colSpan=t.columns.length,o.rowSpan=1,n=n.concat(i)}return o});o=o.concat(l)}if(r.isCurrentProfile=!0,r.colSpan=1,r.rowSpan=1,t.columns&&t.columns.length>0){var a=this.clone(t.columns);a.map(function(e){return e.column=i?i.find(function(e){return e.profile_year.uid===r.uid}):r,e.isCurrentProfile=!0,e}),r.colSpan=t.columns.length,r.rowSpan=1,n=n.concat(a)}if(o.push(r),this.columns.push(o),n&&n.length>0)this.columns.push(n),this.rowColumns=n;else{var c=this.clone(this.columns[0]);c.splice(0,1),this.rowColumns=c}this.rowColumns.map(function(e){e.colCode=e.code,e.column&&(e.colCode=e.code+"_"+e.column.name),e.vsum=function(e,t,o){var n=0;return e.forEach(function(e){var i=0;if(t.isCurrentProfile){if(e[t.colCode]&&e[t.colCode].qCode){var r=e[t.colCode].qCode;o&&o[r]&&(i=o[r])}}else e[t.colCode]&&e[t.colCode].value&&(i=e[t.colCode].value);n+=i}),n}}),this.to.rows.map(function(t){return e.rowColumns.map(function(o){var n=0,i={};o.column?(i=e.to.questions.find(function(e){return e.column.code===o.code&&e.row.code===t.code}),n=o.column[i.code]):(i=e.to.questions.find(function(e){return e.row.code===t.code}))&&i.code&&(n=o[i.code]);var r=0;return r=i?e.field.fieldGroup.findIndex(function(e){return e.key===i.code}):e.field.fieldGroup.findIndex(function(e){return"dummy"===e.key}),i&&i.code&&(t[o.colCode]={value:n||0,fieldIndex:r,qCode:i.code,question:i}),o}),t})}},t.prototype.clone=function(e){return JSON.parse(JSON.stringify(e))},t.prototype.checkError=function(){if(this.form.get(this.dummyErrorKey)){this.form.get(this.dummyErrorKey).setErrors(null);var e=this.field;if(e.templateOptions.display_rules&&e.templateOptions.display_rules.validations&&e.templateOptions.display_rules.validations.rules)for(var t=e.templateOptions.display_rules.validations.rules,o=0;o<t.length;o++){var n=t[o];if(!s.o.evalFun(s.o.conversionExpression(n.rule),{form:e.form,model:e.model,$:e.model},!0))return this.form.get(this.dummyErrorKey).setErrors({error:{message:n.message}}),!1}}},t=n.c([Object(i.Component)({selector:"zc-ui-matrix-field",template:o("zFLm"),providers:[u.CurrencyPipe],styles:[o("f0ng")]}),n.f("design:paramtypes",[l,p.d,p.c,u.CurrencyPipe])],t)}(p.a),R=o("BPyD"),L=function(){function e(){}return e=n.c([Object(i.NgModule)({declarations:[z],imports:[u.CommonModule,r.ReactiveFormsModule,R.TableModule,p.e.forChild({types:[{name:"matrix",component:z}]})]})],e)}(),D=function(e){function t(t,o){var n=e.call(this)||this;return n.ngZone=t,n.http=o,n.showSelectField=!1,n.defaultOptions={templateOptions:{options:[]}},n}return n.d(t,e),t.prototype.ngOnInit=function(){var e=this;this.to.question&&this.to.question.picklist&&this.http.requestCache("api/choose-data/"+this.to.question.picklist,"post",{}).subscribe(function(t){t.data&&t.data.listData&&t.data.listData.rows&&(e.to.options=t.data.listData.rows),e.showSelectField=!0})},t=n.c([Object(i.Component)({selector:"formly-field-select",template:'\n<div class="select-field"  [class.readonly]="to.readonly">\n<p-dropdown [options]="to.options"\n[style]="{ width: \'100%\' }"\n[filter]="true"\n[readonly]="to.readonly"\noptionLabel="name"\n[formControl]="formControl" appendTo="body"\n[formlyAttributes]="field"\n  [inputId]="field.key + \'_uid\'"  dataKey="uid" [showClear]="(formControl.value && formControl.value.uid && !to.readonly)"\n   placeholder="Choose">\n </p-dropdown>\n \n</div>\n  '}),n.f("design:paramtypes",[i.NgZone,s.g])],t)}(p.a),N=o("Hpdm"),V=function(){function e(){}return e=n.c([Object(i.NgModule)({declarations:[D],imports:[u.CommonModule,r.ReactiveFormsModule,N.DropdownModule,F,T.a,p.e.forChild({types:[{name:"select",component:D,wrappers:["form-field"]},{name:"enum",extends:"select"},{name:"choose",extends:"select"}]})]})],e)}(),G=o("SHvt"),A=function(e){function t(t){var o=e.call(this)||this;return o.modalService=t,o.submitLabel="Add",o.dummyData={name:"other_discipline",cols:[{label:"Discipline",name:"name",type:"text",properties:{cssClass:"col-12"}},{label:"Male",name:"male",type:"number",properties:{cssClass:"col-6"}},{label:"Female",name:"female",type:"number",properties:{cssClass:"col-6"}},{label:"Transgender",name:"transgender",type:"number",properties:{cssClass:"col-6"}}]},o.tForm=new r.FormGroup({}),o.tModel={},o.formField=[],o.tOptions={},o.colums=[],o}return n.d(t,e),t.prototype.ngOnInit=function(){if(console.log("to",this.to),this.to.matrix_config&&this.to.matrix_config.cols){this.colums=this.to.matrix_config.cols;var e=this.to.matrix_config.cols.map(function(e){return e.key=e.name,e.wrappers=["vertical"],{key:e.name,wrappers:["vertical"],type:e.type.uid||"number",className:e.properties.cssClass,templateOptions:{label:e.label}}});this.formField=e}},t.prototype.openModal=function(e,t,o){if(this.tModel={},this.currentRowIndex=null,this.submitLabel="Add","edit"===e){var n=this.formControl.value;console.log("tModel",n,n[o],o),this.tModel=JSON.parse(JSON.stringify(n[o])),this.currentRowIndex=o,this.submitLabel="Update"}this.modal=this.modalService.open(t,{size:"lg",centered:!0,windowClass:"zc-field-table-modal2",backdrop:"static"})},t.prototype.delete=function(e){var t=this.formControl.value;t.splice(e,1),this.formControl.setValue(t)},t.prototype.submit=function(){var e;(this.formControl.value||this.formControl.setValue([]),this.currentRowIndex||0===this.currentRowIndex)?((e=this.formControl.value)[this.currentRowIndex]=this.tModel,this.formControl.setValue(e)):((e=this.formControl.value).push(this.tModel),this.formControl.setValue(e));this.modal.dismiss()},n.c([Object(i.ViewChild)("zcFormModal"),n.f("design:type",Object)],t.prototype,"zcFormModal",void 0),t=n.c([Object(i.Component)({selector:"zc-ui-table-field",template:o("GHtb"),styles:[o("5A+k")]}),n.f("design:paramtypes",[G.e])],t)}(p.a),H=function(){function e(){}return e=n.c([Object(i.NgModule)({declarations:[A],imports:[u.CommonModule,R.TableModule,d.a,p.e.forChild({types:[{name:"table",component:A,defaultOptions:{defaultValue:[]}}]})]})],e)}(),K=function(){function e(){}return e=n.c([Object(i.NgModule)({declarations:[],imports:[F,y,q,P,j,V,L,H]})],e)}(),J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.d(t,e),t.prototype.getType=function(t){return this.types[t]?e.prototype.getType.call(this,t):e.prototype.getType.call(this,"undefined")},t=n.c([Object(i.Injectable)()],t)}(p.c);function $(e,t){return"Should have atleast "+t.templateOptions.minLength+" characters"}function B(e,t){return"This value should be less than "+t.templateOptions.maxLength+" characters"}function Q(e,t){return"This value should be more than "+t.templateOptions.min}function Y(e,t){return"This value should be less than "+t.templateOptions.max}function W(e,t){return e}function U(e){return e.formState.submitted&&!e.formControl.valid}var X=function(){function e(){}return e=n.c([Object(i.NgModule)({declarations:[],imports:[u.CommonModule,r.ReactiveFormsModule,r.FormsModule,p.e.forRoot({extras:{showError:U},validationMessages:[{name:"required",message:"This field is required"},{name:"pattern",message:"This field is invalid"},{name:"minLength",message:$},{name:"maxLength",message:B},{name:"min",message:Q},{name:"max",message:Y},{name:"server-error",message:W},{name:"error",message:W}]}),K],providers:[{provide:p.c,useClass:J}],exports:[p.e]})],e)}(),Z=o("k/eh");o.d(t,"ZcSurveyQuestionsModule",function(){return ee});var ee=function(){function e(){}return e=n.c([Object(i.NgModule)({imports:[d.a,Z.b,X],declarations:[c],exports:[c]})],e)}()},YfSF:function(e,t,o){"use strict";var n=o("Jg5f");o.d(t,"a",function(){return n.a})},f0ng:function(e,t){e.exports=""},oEoX:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var n=o("LoAr"),i=o("HnWI"),r=o("pN2L"),s=o("Jg5f"),l=function(){function e(){}return e.prototype.transform=function(e,t){var o=this;return e instanceof i.a||(e=Object(r.a)(e)),e.pipe(Object(s.a)(function(e){return o.toOptions(e,t||{})}))},e.prototype.toOptions=function(e,t){var o=this,n=[],i={},r=t.templateOptions||{};return e.map(function(e){o.getGroupProp(e,r)?(i[o.getGroupProp(e,r)]||(i[o.getGroupProp(e,r)]=[],n.push({label:o.getGroupProp(e,r),group:i[o.getGroupProp(e,r)]})),i[o.getGroupProp(e,r)].push(o.toOption(e,r))):n.push(o.toOption(e,r))}),n},e.prototype.toOption=function(e,t){return{label:this.getLabelProp(e,t),value:this.getValueProp(e,t),disabled:this.getDisabledProp(e,t)||!1}},e.prototype.getLabelProp=function(e,t){return"function"==typeof t.labelProp?t.labelProp(e):this.shouldUseLegacyOption(e,t)?e.value:e[t.labelProp||"label"]},e.prototype.getValueProp=function(e,t){return"function"==typeof t.valueProp?t.valueProp(e):this.shouldUseLegacyOption(e,t)?e.key:e[t.valueProp||"value"]},e.prototype.getDisabledProp=function(e,t){return"function"==typeof t.disabledProp?t.disabledProp(e):e[t.disabledProp||"disabled"]},e.prototype.getGroupProp=function(e,t){return"function"==typeof t.groupProp?t.groupProp(e):e[t.groupProp||"group"]},e.prototype.shouldUseLegacyOption=function(e,t){return!t.valueProp&&!t.labelProp&&null!=e&&"object"==typeof e&&"key"in e&&"value"in e},e.decorators=[{type:n.Pipe,args:[{name:"formlySelectOptions"}]}],e}(),a=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{declarations:[l],exports:[l]}]}],e}()},vtXP:function(e,t,o){"use strict";var n=o("YfSF");o.d(t,"a",function(){return n.a})},zFLm:function(e,t){e.exports='\x3c!-- <p-table [columns]="columns" [value]="formControl.value" [paginator]="false" [rows]="150">\r\n      <ng-template pTemplate="header" let-columns>\r\n        <tr>\r\n          <th *ngFor="let col of columns">\r\n            {{ col.code }}\r\n          </th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">\r\n        <tr [pSelectableRow]="rowData">\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate="emptymessage" let-columns>\r\n        <tr>\r\n          <td [attr.colspan]="columns && columns.length">No records found</td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-table> --\x3e\r\n\r\n\x3c!-- <formly-field [field]="field.fieldGroup[0]"></formly-field> --\x3e\r\n<div class="ui-table-wrapper ui-table matrix-table" [ngClass]="{\'historical-data-table-container\': to.show_historical_data}">\r\n  <table class="table border" [ngClass]="{\'historical-data-table\': to.show_historical_data}">\r\n    <thead class="ui-table-thead">\r\n      <ng-container *ngIf="!to.show_historical_data">\r\n        <tr *ngFor="let col of columns;let first=first;">\r\n          <th scope="col" *ngFor="let c of col" [rowSpan]="c.rowSpan" [colSpan]="c.colSpan">{{c.name}}</th>\r\n          <th rowSpan="2" class="h-header-total" *ngIf="first && to.horizontal_total">Total</th>\r\n        </tr>\r\n      </ng-container>\r\n      <ng-container *ngIf="to.show_historical_data">\r\n        <tr *ngFor="let col of columns;let first=first;">\r\n          <th scope="col" *ngFor="let c of col" [rowSpan]="c.rowSpan" [colSpan]="c.colSpan">\r\n            <span *ngIf= "to.prefix && c.uid"> {{to.prefix}}</span> \r\n            {{c.name}}\r\n            <span *ngIf= "to.postfix && c.uid"> {{to.postfix}}</span> \r\n            </th>\r\n          <th rowSpan="2" class="h-header-total" *ngIf="first && to.horizontal_total">Total</th>\r\n        </tr>\r\n      </ng-container>\r\n    </thead>\r\n    <tbody class="ui-table-tbody">\r\n      <tr *ngFor="let row of to.rows">\r\n        <td>{{row.name}}</td>\r\n        <ng-container *ngIf="!to.show_historical_data">\r\n          <td *ngFor="let c of rowColumns" [ngClass]="(showThousandSeparator)?\'survey_table_amount\':\'survey_table_number\'">\r\n            <formly-field [field]="getField(row,c)"></formly-field>\r\n          </td>\r\n          <td class="h-total" *ngIf="to.horizontal_total && row.hsum" [ngClass]="(showThousandSeparator)?\'survey_table_amount\':\'survey_table_number\'">\r\n            <span>{{row.hsum(row, rowColumns,model)}}</span>\r\n          </td>\r\n        </ng-container>\r\n        <ng-container *ngIf="to.show_historical_data">\r\n\r\n          <td *ngFor="let c of rowColumns" [ngClass]="(showThousandSeparator)?\'survey_table_amount\':\'survey_table_number\'" >\r\n            <span *ngIf="!c.isCurrentProfile && row[c.colCode]"> {{ convertToThousands(row[c.colCode].value)}} </span>\r\n            <formly-field [field]="field.fieldGroup[row[c.colCode].fieldIndex]" *ngIf="row.uid && c.isCurrentProfile && row[c.colCode]"></formly-field>\r\n          </td>\r\n          <td class="h-total" *ngIf="to.horizontal_total" [ngClass]="(showThousandSeparator)?\'survey_table_amount\':\'survey_table_number\'">\r\n            <span *ngIf="row.hsum">{{row.hsum(row, columns,model)}}</span>\r\n          </td>\r\n        </ng-container>\r\n      </tr>\r\n      \x3c!-- historical data total --\x3e\r\n      <tr class="v-total" *ngIf="to.vertical_total && to.show_historical_data">\r\n        <td>Total</td>\r\n        <td *ngFor="let c of rowColumns" [ngClass]="(showThousandSeparator)?\'survey_table_amount\':\'survey_table_number\'">\r\n          \x3c!-- <span *ngIf="!c.isCurrentProfile">{{ convertToThousands(c.vsum(to.rows,c,model))}}</span>--\x3e\r\n          <span>{{ convertToThousands(c.vsum(to.rows,c,model))}}</span> \r\n        </td>\r\n      </tr>\r\n      <tr class="v-total" *ngIf="to.vertical_total && !to.show_historical_data">\r\n        <td>Total</td>\r\n        <td *ngFor="let c of rowColumns" [ngClass]="(showThousandSeparator)?\'survey_table_amount\':\'survey_table_number\'">\r\n          <span *ngIf="c.vsum">{{ convertToThousands(c.vsum(to.rows,c,model))}}</span>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n<div class="invalid-feedback d-block field-error-message" *ngIf="field.fieldGroup[0] && field.fieldGroup[0].formControl.invalid && !to.viewMode">\r\n  <formly-validation-message [field]="field.fieldGroup[0]"></formly-validation-message>\r\n</div>\r\n'}}]);