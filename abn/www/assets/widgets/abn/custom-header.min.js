if(!$)var $=jQuery;var zc;zc.editionTitle=zc.params.module.replace("_"," ");var monthText,formatedDate,setDate,selectedDate=null,baseUrl=zc.config.apiUrl+zc.config.client,date=new Date(zc.params.page.split("-").reverse().join("-")),day=date.getDay(),currentDate=date.getDate(),header={"Content-Type":"application/json"},month=date.getMonth(),year=date.getFullYear().toString().substr(-2),dayText="",days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fullNameDays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],getDate=localStorage.getItem("date"),formatedDateSpan=(selectedDate=new Date(zc.params.page.split("-").reverse().join("-")),$("#formatedDate")),categoryName=localStorage.getItem("categoryName"),editions=[],availableDates=[];zc.zoomIn=(()=>{$(".zc-clip-right-block").hide(),$(".zc-google-ad").hide(),$(".pinch-zoom-content").draggable({disabled:!1}),$(".pinch-zoom-content").css({cursor:"all-scroll"})}),$(document).ready(function(){$("#lastWeekDaysList");fullNameDays.forEach((e,t)=>{!function(e){var t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()-e);getDayIndex=a.getDay(),fullNameDays.forEach((e,a)=>{a===getDayIndex&&e,t.getDay()===getDayIndex&&"Today's Issue",t.getDay()===getDayIndex+1&&"Yesterday"})}(t)}),$("#nav-toggle").click(function(){$("body").removeClass("hide-menu"),$("body").addClass("show-menu")}),$("#nav-close").click(function(){$("body").removeClass("show-menu"),$("body").addClass("hide-menu")}),window.innerWidth>768&&($(".zoomin").click(function(){console.log("zoomin event --\x3e"),$(".zc-clip-right-block").hide(),$(".zc-google-ad").hide(),$(".pinch-zoom-content").draggable({disabled:!1}),$(".pinch-zoom-content").css({cursor:"all-scroll"})}),$(".main-img").click(function(){$(".zc-clip-right-block").hide(),$(".zc-google-ad").hide(),$(".pinch-zoom-content").draggable({disabled:!1}),$(".pinch-zoom-content").css({cursor:"all-scroll"})}),$(".zoomout").click(function(){$(".zc-clip-right-block").show(),$(".zc-google-ad").show(),$(".pinch-zoom-content").draggable({disabled:!0}),$(".pinch-zoom-content").css({cursor:"default",left:0,top:0,transform:"matrix(1, 0, 0, 1, 0, 0)"})}))});var lastWeek,datesloaded=!1;function loadDates(){datesloaded||(getEditionsDates(),datesloaded=!0)}function getEditionsDates(){days.forEach((e,t)=>(t==selectedDate.getDay()&&(dayText=e),dayText)),months.forEach((e,t)=>{t==selectedDate.getMonth()&&(monthText=e)}),formatedDate=dayText+","+selectedDate.getDate()+" "+monthText+" "+selectedDate.getFullYear().toString().substr(-2),document.getElementById("divDateSelector");let e={};zc.queryParams.s?(e.childs=!0,e.sub_sub_category=zc.params.module):e.sub_category=zc.params.module;var t=new Date(selectedDate.getFullYear(),selectedDate.getMonth(),1),a=new Date(selectedDate.getFullYear(),selectedDate.getMonth()+1,0);e.start_date=selectedDate.getFullYear()+"-"+(selectedDate.getMonth()+1)+"-"+t.getDate(),e.end_date=selectedDate.getFullYear()+"-"+(selectedDate.getMonth()+1)+"-"+a.getDate(),$.ajax({url:`${baseUrl}/api/edition/list/publish`,type:"GET",dataType:"json",data:e,success:function(e){try{editions=e.data.listData.rows;var t,a=new Date,o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=$("#lastWeekDaysList");n.html(" ");for(var s="",c=0;c<7;c++)(a=new Date).setDate(a.getDate()-c),a.setHours(0,0,0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),t=0===c?"Today's issue":1===c?"Yesterday":o[a.getDay()],editions.forEach(e=>{var o=new Date(e.date);if(o.setHours(0,0,0),o.getTime()===a.getTime()){var c=e.sub_sub_category.code?e.sub_sub_category.code:e.sub_category.code,d="/"+e.uid_actual+"/"+c+"/"+e.date.split("-").reverse().join("-");zc.queryParams.s&&(d=d+"?s="+zc.queryParams.s),s=`<a class="week" onclick="zc.actionService.navigateByUrl('${d}')"> ${t}</a>`,n.append(s)}});availableDates=[],editions.length>0&&editions.forEach(e=>{availableDates.push(e.date)}),$("#datepicker").datepicker({changeMonth:!0,changeYear:!0,maxDate:new Date,showAnim:"fadeIn",defaultDate:selectedDate,beforeShowDay:function(e){var t=jQuery.datepicker.formatDate("yy-mm-dd",e);return[-1!=availableDates.indexOf(t)]},onSelect:function(){var e,t;if(formatedDateSpan.empty(),selectedDate=$(this).val(),selectedDate=new Date(selectedDate),date=new Date(selectedDate),editions.forEach(a=>{const o=new Date(a.date);o.setHours(0,0,0,0),editionDate=o.getTime(),t=selectedDate.getTime(),editionDate==t&&(e=a)}),!e)return!1;var a=e.sub_sub_category.code?e.sub_sub_category.code:e.sub_category.code,o="/"+e.uid_actual+"/"+a+"/"+e.date.split("-").reverse().join("-");return zc.queryParams.s&&(o=o+"?s="+zc.queryParams.s),zc.actionService.navigateByUrl(o),!1},onChangeMonthYear:function(e,t,a){let o={};zc.queryParams.s?(o.childs=!0,o.sub_sub_category=zc.params.module):o.sub_category=zc.params.module;var n=new Date(e,t-1,1),s=new Date(n.getFullYear(),n.getMonth(),1),c=new Date(n.getFullYear(),n.getMonth()+1,0);o.start_date=e+"-"+t+"-"+s.getDate(),o.end_date=e+"-"+t+"-"+c.getDate(),$.ajax({url:`${baseUrl}/api/edition/list/publish`,type:"GET",dataType:"json",data:o,success:function(e){availableDates=[],(editions=e.data.listData&&e.data.listData.rows?e.data.listData.rows:[]).length>0&&editions.forEach(e=>{availableDates.push(e.date)})},complete:function(){$("#datepicker").datepicker("refresh")}})}})}catch(e){}},complete:function(){}})}function getLastWeek(e){formatedDateSpan.empty();var t=new Date;return lastWeek=new Date(t.getFullYear(),t.getMonth(),t.getDate()-e),day=lastWeek.getDay(),currentDate=lastWeek.getDate(),month=lastWeek.getUTCMonth(),year=lastWeek.getUTCFullYear().toString().substr(-2),days.forEach((e,t)=>{t==day&&(dayText=e)}),months.forEach((e,t)=>{t==month&&(monthText=e)}),formatedDate=dayText+","+currentDate+" "+monthText+" "+year,setDate=localStorage.setItem("date",formatedDate),(getDate=localStorage.getItem("date"))&&formatedDateSpan.append(getDate),window.location.reload(),lastWeek}function goHome(){zc.actionService.navigateByUrl("/"),closeMenu()}function closeMenu(){$("body").removeClass("show-menu"),$("body").addClass("hide-menu")}$(document).on("click.dropdown",".dropdown.keep-inside-clicks-open",function(e){e.stopPropagation()}),$(document).on("click",".ui-datepicker-next",function(e){console.log("next"),e.stopPropagation()}),$(document).on("click",".ui-datepicker-prev",function(e){console.log("prev"),e.stopPropagation()}),$(window).scroll(function(){window.innerWidth>=1024&&(window.scrollY>50?$(".e-paper-strip").addClass("fixed"):$(".e-paper-strip").removeClass("fixed"))});