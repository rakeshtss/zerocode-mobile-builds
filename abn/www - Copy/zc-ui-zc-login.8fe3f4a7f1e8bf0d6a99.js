(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"/qBQ":function(t,e){t.exports='<zc-com-render\r\n  *ngIf="!isLoggedIn"\r\n  type="form"\r\n  [options]="formOptions"\r\n  (componentReady)="componentReady($event)"\r\n></zc-com-render>\r\n<ng-template #LoginSessionModal let-c="close" let-d="dismiss">\r\n  <div class="modal-header">\r\n    <h4 class="modal-title" id="modal-basic-title">Logged In Sessions</h4>\r\n    \x3c!-- <button\r\n      type="button"\r\n      class="close"\r\n      title="Close"\r\n      aria-label="Close"\r\n      (click)="modal.close()"\r\n    >\r\n      <span aria-hidden="true">&times;</span>\r\n    </button> --\x3e\r\n  </div>\r\n  <div class="modal-body">\r\n    <a class="check-all" (click)="checkAllSessions()">Check All</a>\r\n    <div class="col-12 zc-login-sessions" *ngFor="let session of oldSessions;let i = index;">\r\n      <p-checkbox name="check_seession_{{i}}" value="true" [(ngModel)]="session.checked" binary="true"></p-checkbox>\r\n      \x3c!-- <input type="checkbox" [(ngModel)]="session.checked" />  --\x3e\r\n      last accessed on :\r\n      {{ session.last_accessed_on | date }} os : {{ session.os }} ip :\r\n      {{ session.ip }} browser : {{ session.browser }}\r\n    </div>\r\n  </div>\r\n  <div class="modal-footer">\r\n    <button\r\n      type="button"\r\n      [disabled]="checkDisabled()"\r\n      class="btn btn-sm btn-primary"\r\n      (click)="okSesssion()"\r\n    >\r\n      Remove and Continue\r\n    </button>\r\n    <button\r\n      type="button"\r\n      class="btn btn-sm btn-danger"\r\n      (click)="modal.close(\'Cross click\')"\r\n    >\r\n      Skip\r\n    </button>\r\n  </div>\r\n</ng-template>\r\n'},DLoY:function(t,e,s){"use strict";s.r(e);var o=s("D57K"),n=s("LoAr"),i=s("981U"),r=s("05nE"),c=function(){function t(t){this.http=t}return t.prototype.verifyLogin=function(t,e){return this.http.post(e,t)},t.prototype.getUserDetail=function(t){return this.http.get(t)},t.prototype.checkSession=function(){return this.http.get("checkSession")},t.prototype.removeOldServerSession=function(t){return void 0===t&&(t={}),this.http.post("inValidate",t)},t=o.c([Object(n.Injectable)(),o.f("design:paramtypes",[r.c])],t)}(),l=s("SHvt"),d=function(){function t(t,e,s,o,n,i){this.router=t,this.actionService=e,this.modalService=s,this.ls=o,this.wls=n,this.appConfigService=i,this.submitted=!1,this.fpSubmitted=!1,this.isLoggedIn=!1,this.isForgotPassword=!1,this.credentials={},this.user={},this.oldSessions=[]}return t.prototype.ngOnInit=function(){this.formOptions=JSON.parse(JSON.stringify(this.options)),this.formOptions.id=this.options.id+"_form",this.ls.getItem("credentials")&&(this.formOptions.params=this.ls.getItem("credentials",!0)),zc[this.options.id]=this,this.user=this.ls.getItem("user",!0),this.user?this.user.redirectUrl&&""!==this.user.redirectUrl&&this.router.navigate(["/"+this.user.redirectUrl]):this.isLoggedIn=!1},t.prototype.ngAfterViewInit=function(){},t.prototype.componentReady=function(t){var e=this;try{setTimeout(function(){console.log("componentReady"),zc[e.options.id].form=zc[e.formOptions.id].form,zc[e.options.id].formlyOptions=zc[e.formOptions.id].formlyOptions,zc[e.options.id].model=zc[e.formOptions.id].model},10)}catch(s){console.log("error",s)}},t.prototype.submit=function(){return this.ls.removeItem("user"),zc[this.formOptions.id].model},t.prototype.login=function(t){var e=this;t.success?(zc[this.options.id].model.rememberMe?this.ls.setItem("credentials",zc[this.options.id].model,!0):this.ls.removeItem("credentials"),this.ls.setItem("user",t.data,!0),"AlertForMultiple"===this.appConfigService.settings.login_mode&&t.data&&t.data.oldSessions&&t.data.oldSessions.length>0?(this.oldSessions=JSON.parse(JSON.stringify(t.data.oldSessions)),this.modal=this.modalService.open(this.LoginSessionModal,{size:"lg",centered:!0,backdrop:"static",windowClass:"login-session-modal"}),this.modal.result.then(function(s){e.navigateUrl(t)})):this.navigateUrl(t)):this.errorMsg=t.message},t.prototype.okSesssion=function(){var t=this.oldSessions.filter(function(t){return t.checked});this.wls.removeOldServerSession({oldSessions:t}).subscribe(function(t){}),this.modal.close()},t.prototype.cancelSession=function(){},t.prototype.checkAllSessions=function(){this.oldSessions.map(function(t){t.checked=!0})},t.prototype.checkDisabled=function(){return!(this.oldSessions.filter(function(t){return t.checked}).length>0)},t.prototype.logout=function(){this.ls.removeItem("credentials"),this.ls.removeItem("user"),this.isLoggedIn=!1},t.prototype.navigateUrl=function(t){this.options.events&&this.options.events.onSuccess&&this.actions(this.options.events.onSuccess,t.data),!1!==this.options.redirectUrl&&(""!==t.data.redirectUrl?this.router.navigate(["/"+t.data.redirectUrl]):this.isLoggedIn=!0)},t.prototype.actions=function(t,e){var s=this;t&&t.forEach(function(t){s.actionService.action(t,e)})},o.c([Object(n.Input)(),o.f("design:type",Object)],t.prototype,"options",void 0),o.c([Object(n.ViewChild)("LoginSessionModal"),o.f("design:type",Object)],t.prototype,"LoginSessionModal",void 0),t=o.c([Object(n.Component)({selector:"zc-login",template:s("/qBQ")}),o.f("design:paramtypes",[i.Router,r.a,l.e,r.i,c,r.b])],t)}(),a=s("IfiR"),p=s("eQXH");s.d(e,"ZcWidgetLoginModule",function(){return h});var h=function(){function t(){}return t=o.c([Object(n.NgModule)({imports:[p.a,a.FormsModule,a.ReactiveFormsModule],declarations:[d],providers:[c],exports:[d]})],t)}()}}]);