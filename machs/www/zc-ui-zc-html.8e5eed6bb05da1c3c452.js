(window.webpackJsonp=window.webpackJsonp||[]).push([[55,71],{FXim:function(t,e){t.exports=""},oIyp:function(t,e){t.exports='<ng-container *ngIf="showWidget">\r\n\r\n<ng-template\r\n  *ngIf="showTemplate && options.type !==\'page\'"\r\n  dynamic-template\r\n  [extraModules]="[myExtraModules]"\r\n  [template]="htmlContainer"\r\n  [defaultTemplate]="\'<span>on error template</span>\'"\r\n  [context]="{ zc: _zc,zcState:_zcState }"\r\n>\r\n</ng-template>\r\n<zc-page-render *ngIf="options.type==\'page\' && pageInfo" [options]="{ widgets: pageInfo }"></zc-page-render>\r\n</ng-container>\r\n'},vtXP:function(t,e,n){"use strict";var o=n("YfSF");n.d(e,"a",function(){return o.map})},wOqE:function(t,e,n){"use strict";n.r(e);var o=n("D57K"),i=n("LoAr"),s=n("WT9V"),r=n("05nE"),a=n("GiBk"),c=function(){function t(t,e){this.http=t,this.config=e,this.scriptsList=[],this.scriptsLength=0}return t.prototype.load=function(t){this.scriptsList=t,this.loadScript(0)},t.prototype.loadScript=function(t){var e=this;void 0===t&&(t=0);var n,o=this.scriptsList[t];if(o){var i="zc-script-"+o.name,s=document.createElement("script");s.type="text/javascript",n=(n=o.src).includes("?")?n+"&v="+this.config.settings.version:n+"?v="+this.config.settings.version,s.src=n,s.id=i,s.readyState?s.onreadystatechange=function(){"loaded"!==s.readyState&&"complete"!==s.readyState||(s.onreadystatechange=null,o.loaded=!0)}:s.onload=function(){o.loaded=!0,e.scriptsList.length-1>t&&(console.log("indexd",t),e.loadScript(t+1)),console.log({script:o.name,loaded:!0,status:"Loaded"})},s.onerror=function(t){return console.log({script:o.name,loaded:!1,status:"Loaded"})},this.isMyScriptLoaded(i)&&document.getElementsByTagName("head")[0].appendChild(s)}},t.prototype.loadCss=function(t){var e=this;t&&t.forEach(function(t){var n=document.createElement("link");n.rel="stylesheet";(new Date).getTime();n.href=t.src+"?v="+e.config.settings.version,n.id="dynamiccss_"+t.name,e.isMyCssLoaded(n.id)||document.getElementsByTagName("head")[0].appendChild(n)})},t.prototype.getHtml=function(t){var e=new a.HttpHeaders;return e.append("Cache-control","no-cache"),e.append("Cache-control","no-store"),e.append("Expires","0"),e.append("Pragma","no-cache"),this.http.getHtml(t,{responseType:"text",headers:e})},t.prototype.isMyScriptLoaded=function(t){for(var e=document.getElementsByTagName("head")[0].getElementsByTagName("script"),n=e.length;n--;)if(e[n].id===t)return e[n].remove(),!0;return!0},t.prototype.isMyCssLoaded=function(t){for(var e=document.getElementsByTagName("head")[0].getElementsByTagName("link"),n=e.length;n--;)if(e[n].id===t)return!0;return!1},t=o.c([Object(i.Injectable)(),o.f("design:paramtypes",[r.c,r.b])],t)}(),p=n("vtXP"),h=function(){function t(t){this.http=t}return t.prototype.getHtmlContent=function(t){return this.http.get("html-content-api/"+t)},t.prototype.getActionPageInfo=function(t){return this.http.get(t).pipe(Object(p.a)(function(t){return t.data}))},t=o.c([Object(i.Injectable)({providedIn:"root"}),o.f("design:paramtypes",[r.c])],t)}(),d=n("k/eh"),l=n("981U"),u=function(){function t(t,e,n,o,i){this.ds=t,this._htmlService=e,this.http=n,this.actionService=o,this.conf=i,this.showWidget=!0,this.htmlContainer="",this.myExtraModules=[s.CommonModule,r.o,d.b,l.RouterModule],zc.http=n}return t.prototype.ngOnInit=function(){switch(this.showWidget=!0,this._zc=zc,this._zcState=zcState,this.loadCss(),this.options.type){case"custom-html":this.loadCustomHtml();break;case"custom-api":this.getHtmlFormAPI();break;case"page":this.getPageload();break;default:this.options.template&&(this.htmlContainer=this.options.template,this.showTemplate=!0,this.loadJsFile())}},t.prototype.ngAfterViewInit=function(){this.options.id&&(zc[this.options.id]=this)},t.prototype.getPageload=function(){var t=this;this.pageInfo=null,this.options.pageUrl&&this._htmlService.getActionPageInfo("page/"+this.options.pageUrl).subscribe(function(e){if(e.instructions.definition&&e.instructions.definition.widgets){var n=e.instructions;if(t.pageInfo=e.instructions.definition.widgets,n&&n.definition&&n.definition.onLoad&&n.definition.onLoad.actions)n.definition.onLoad.actions.forEach(function(e){t.actionService.action(e)})}})},t.prototype.loadCustomHtml=function(){var t=this;try{this.conf.settings.endPointUrl.endsWith("/")||(this.conf.settings.endPointUrl=this.conf.settings.endPointUrl+"/");var e=this.conf.settings.endPointUrl+this.conf.settings.client+"/widgets/",n=e+this.options.widget+"/index.html";this.ds.getHtml(n).subscribe(function(n){t.htmlContainer=n,t.showTemplate=!0,t.options&&t.options.js&&t.options.js.length>0&&t.options.js.map(function(t){var n=t.src;return n.startsWith("https://")||n.startsWith("http://")?t.name=t.src.split("/").pop().replaceAll(".","_"):(t.name||(t.name=t.src.replaceAll("/","_").replaceAll(".","_")),t.src=e+t.src),t}),t.loadJsFile()})}catch(o){console.error(o)}},t.prototype.loadCss=function(){if(this.options.css){this.conf.settings.endPointUrl.endsWith("/")||(this.conf.settings.endPointUrl=this.conf.settings.endPointUrl+"/");var t=this.conf.settings.endPointUrl+this.conf.settings.client+"/widgets/";this.options.css=this.options.css.map(function(e){var n=e.src;return n.startsWith("https://")||n.startsWith("http://")||(e.src=t+e.src),e})}this.ds.loadCss(this.options.css||[])},t.prototype.getHtmlFormAPI=function(){var t=this;this._htmlService.getHtmlContent(this.options.apiCode).subscribe(function(e){e&&e.content&&(t.htmlContainer=e.content,t.showTemplate=!0,t.loadJsFile())})},t.prototype.loadJsFile=function(){this.options&&this.options.js&&this.options.js.length>0&&this.ds.load(this.options.js||[])},t.prototype.show=function(){this.showWidget=!0},t.prototype.hide=function(){this.showWidget=!1},t.prototype.reload=function(){var t=this;this.htmlContainer="",this.showTemplate=!1,setTimeout(function(){t.ngOnInit()},100)},t.prototype.ngOnDestroy=function(){},o.c([Object(i.Input)(),o.f("design:type",Object)],t.prototype,"options",void 0),t=o.c([Object(i.Component)({selector:"zc-html",template:n("oIyp"),styles:[n("FXim")]}),o.f("design:paramtypes",[c,h,r.c,r.a,r.b])],t)}(),g=n("87bh");n.d(e,"ZcHtmlModule",function(){return f});var f=function(){function t(){}return t=o.c([Object(i.NgModule)({imports:[s.CommonModule,g.NgxDynamicTemplateModule,d.b],declarations:[u],providers:[c,h],exports:[u]})],t)}()}}]);