(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"2/C2":function(t,n,i){"use strict";i.r(n);var o=i("D57K"),e=i("LoAr"),a=i("WT9V"),r=i("981U"),s=i("05nE"),c=function(){function t(t){this.http=t}return t.prototype.getNotificationList=function(t,n){return this.http.post(t,n).map(function(t){return t})},t=o.c([Object(e.Injectable)({providedIn:"root"}),o.f("design:paramtypes",[s.c])],t)}(),l=function(){function t(t,n,i){this.router=t,this.route=n,this.notificationService=i,this.myExtraModules=[a.CommonModule,s.o],this.newNotification=!1,this.notifications=[],this.notificationsCount=0,this.appName="zcbase"}return t.prototype.ngOnInit=function(){var t=this;this.options.displayFormat||(this.options.displayFormat="{{item.subject}}"),this.route.snapshot.params.app&&(this.appName=this.route.snapshot.params.app),this.allUrl="/"+this.appName+"/account/notification-list",this.notificationUrl="/"+this.appName+"/account/notification-view/",zcGlobal.notificationList=this,this.options.allUrl&&(this.allUrl=this.options.allUrl),this.options.notificationUrl&&(this.notificationUrl=this.options.notificationUrl),this.paramsSubscribe$=this.router.events.subscribe(function(n){n instanceof r.NavigationEnd&&t.notificationsList()}),this.notificationsList(),this.options.refreshTime&&this.refreshTime(),this.options.refreshTabChange&&this.tabChange()},t.prototype.notificationsList=function(){var t=this,n={rows:5,dynaFilters:[{fieldName:"status",key:"status",value:"unread",matchType:"any"}]};this.newNotification=!1,this.notificationService.getNotificationList("zc-notification/notificationList",n).subscribe(function(n){n.success&&(t.notifications=n.data.listData.rows,t.options.isSound&&t.notificationsCount&&parseInt(n.data.listData.records)>parseInt(t.notificationsCount)&&(t.playSound(),t.newNotification=!0),t.notificationsCount=n.data.listData.records)})},t.prototype.reload=function(){this.ngOnInit()},t.prototype.playSound=function(t){void 0===t&&(t="assets/sounds/bell");var n='<source src="'+t+'.mp3" type="audio/mpeg">',i='<source src="'+t+'.ogg" type="audio/ogg">',o='<embed hidden="true" autostart="true" loop="false" src="'+t+'.mp3">';document.getElementById("notification-sound").innerHTML='<audio autoplay="autoplay">'+n+i+o+"</audio>"},t.prototype.refreshTime=function(){var t=this;this.setIntervalStop=setInterval(function(){t.notificationsList()},this.options.refreshTime)},t.prototype.handleVisibleState=function(){document.hidden?this.setIntervalStop&&(clearInterval(this.setIntervalStop),this.setIntervalStop=null):(this.notificationsList(),this.options.refreshTime&&(this.setIntervalStop||this.refreshTime()))},t.prototype.tabChange=function(){var t=this;this.visibilityChangeCallback=function(){return t.handleVisibleState()},document.addEventListener("visibilitychange",this.visibilityChangeCallback,!0)},t.prototype.ngOnDestroy=function(){this.paramsSubscribe$&&this.paramsSubscribe$.unsubscribe(),this.setIntervalStop&&clearInterval(this.setIntervalStop),this.visibilityChangeCallback&&document.removeEventListener("visibilitychange",this.visibilityChangeCallback,!0)},o.c([Object(e.Input)(),o.f("design:type",Object)],t.prototype,"options",void 0),t=o.c([Object(e.Component)({selector:"zc-notifications",template:i("peEp"),styles:[i("eGZN")]}),o.f("design:paramtypes",[r.Router,r.ActivatedRoute,c])],t)}(),p=i("SHvt"),f=i("87bh");i.d(n,"ZcNotificationModule",function(){return d});var d=function(){function t(){}return t=o.c([Object(e.NgModule)({declarations:[l],imports:[a.CommonModule,r.RouterModule,f.NgxDynamicTemplateModule,p.g],exports:[l]})],t)}()},eGZN:function(t,n){t.exports=".new-notify::before {\n  -webkit-animation: ring 1.5s ease;\n          animation: ring 1.5s ease; }\n\n@-webkit-keyframes ring {\n  0% {\n    -webkit-transform: rotate(35deg);\n            transform: rotate(35deg); }\n  12.5% {\n    -webkit-transform: rotate(-30deg);\n            transform: rotate(-30deg); }\n  25% {\n    -webkit-transform: rotate(25deg);\n            transform: rotate(25deg); }\n  37.5% {\n    -webkit-transform: rotate(-20deg);\n            transform: rotate(-20deg); }\n  50% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg); }\n  62.5% {\n    -webkit-transform: rotate(-10deg);\n            transform: rotate(-10deg); }\n  75% {\n    -webkit-transform: rotate(5deg);\n            transform: rotate(5deg); }\n  100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg); } }\n\n@keyframes ring {\n  0% {\n    -webkit-transform: rotate(35deg);\n            transform: rotate(35deg); }\n  12.5% {\n    -webkit-transform: rotate(-30deg);\n            transform: rotate(-30deg); }\n  25% {\n    -webkit-transform: rotate(25deg);\n            transform: rotate(25deg); }\n  37.5% {\n    -webkit-transform: rotate(-20deg);\n            transform: rotate(-20deg); }\n  50% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg); }\n  62.5% {\n    -webkit-transform: rotate(-10deg);\n            transform: rotate(-10deg); }\n  75% {\n    -webkit-transform: rotate(5deg);\n            transform: rotate(5deg); }\n  100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg); } }\n"},peEp:function(t,n){t.exports='<div ngbDropdown placement="bottom-right" #myDrop="ngbDropdown">\r\n    <a class="icon icon-bell" [ngClass]="{\'new-notify\': newNotification}" id="dropdownBasic1" ngbDropdownToggle>\r\n        <span class="zc-number" *ngIf="notificationsCount > 0">{{notificationsCount}}</span>\r\n    </a>\r\n    <div ngbDropdownMenu aria-labelledby="dropdownBasic1">\r\n        <h4>{{options.title || \'Notifications\'}}</h4>\r\n        <ul class="zc-notifications-list">\r\n            <li *ngFor="let notification of notifications;" [routerLink]="[notificationUrl+notification.uid]">\r\n                <a (click)="myDrop.close();" class="zc-notification-item">\r\n                    <ng-template *ngIf="options.displayFormat" dynamic-template [extraModules]="[myExtraModules]" [template]="options.displayFormat" [context]="{\r\n                  item: notification,\r\n                  zc: _zc }">\r\n                    </ng-template>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n        <a class="see-all" [routerLink]="[allUrl]" (click)="myDrop.close();">{{options.seeAllLabel || \'See All\'}}</a>\r\n    </div>\r\n    <span id="notification-sound"></span>\r\n</div>\r\n'}}]);