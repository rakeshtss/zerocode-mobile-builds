(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"3cnr":function(t,e,o){"use strict";o.d(e,"a",function(){return r});var a=o("D57K"),i=o("LoAr"),n=o("GiBk"),p=o("05nE"),s=o("vtXP"),r=function(){function t(t,e){this._http=t,this._zcHttp=e,this.chartConfig={barChart:[{displayStyle:"basic",chartType:"column",plotOptions:"series"},{displayStyle:"horizontal",chartType:"bar",plotOptions:"series"},{displayStyle:"vertical",chartType:"column",plotOptions:"series"},{displayStyle:"grouped",chartType:"column",plotOptions:"column"},{displayStyle:"stacked",chartType:"column",plotOptions:"column"},{displayStyle:"stacked-full",chartType:"column",plotOptions:"column"},{displayStyle:"stacked-grouped",chartType:"column",plotOptions:"column"},{displayStyle:"stacked-grouped-full",chartType:"column",plotOptions:"column"}],pieChart:[{displayStyle:"basic",chartType:"pie",plotOptions:"pie"},{displayStyle:"donut",chartType:"pie",plotOptions:"pie"},{displayStyle:"semi-circle",chartType:"pie",plotOptions:"pie"}],comboChart:[{displayStyle:"basic",chartType:"column",plotOptions:"series"},{displayStyle:"grouped",chartType:"column",plotOptions:"column"},{displayStyle:"stacked",chartType:"column",plotOptions:"column"},{displayStyle:"stacked-full",chartType:"column",plotOptions:"column"},{displayStyle:"stacked-grouped",chartType:"column",plotOptions:"column"},{displayStyle:"stacked-grouped-full",chartType:"column",plotOptions:"column"}],lineChart:[{displayStyle:"basic",chartType:"line",plotOptions:"series"},{displayStyle:"grouped",chartType:"line",plotOptions:"series"}],splineChart:[{displayStyle:"basic",chartType:"spline",plotOptions:"spline"},{displayStyle:"grouped",chartType:"spline",plotOptions:"spline"}],areaChart:[{displayStyle:"basic",chartType:"area",plotOptions:"area"},{displayStyle:"grouped",chartType:"area",plotOptions:"area"},{displayStyle:"stacked-grouped",chartType:"area",plotOptions:"area"}]}}return t.prototype.getChartsJon=function(t){return this._http.get(t)},t.prototype.getChartDataViaAPI=function(t,e,o){var a=this;return o.plotOptions.isGroupEnable=!1,o.plotOptions.isStackEnable=!1,o.plotOptions.stackedGroupedEnable=!1,this._zcHttp.post(t,e).pipe(Object(s.a)(function(t){var e;if(t.data&&t.data.listData&&t.data.listData.rows&&(e=t.data.listData.rows),o.dataSource&&o.dataSource.api&&o.dataSource.api.map){if(o.dataSource.api.map.groupBy){var i=o.dataSource.api.map.groupBy,n=o.dataSource.api.map.sumKeys;e=a.groupBySum(e,i||[],n||[])}o.dataSource.api.map.parentKey&&(e=a.groupBy(e,o.dataSource.api.map.parentKey))}return a.checkChartType(e,o)}))},t.prototype.checkChartType=function(t,e){return this.chartObject=this.chartConfig[e.chartType].find(function(t){return t.displayStyle===(e.displayStyle||"basic")}),"barChart"===e.chartType&&("grouped"===e.displayStyle&&(e.plotOptions.isGroupEnable=!0),"stacked"===e.displayStyle&&(e.plotOptions.stacking="normal",e.plotOptions.isStackEnable=!0),"stacked-full"===e.displayStyle&&(e.plotOptions.isStackEnable=!0,e.plotOptions.stacking="percent"),"stacked-grouped"===e.displayStyle&&(e.plotOptions.isStackEnable=!0,e.plotOptions.stackedGroupedEnable=!0,e.plotOptions.stacking="normal"),"stacked-grouped-full"===e.displayStyle&&(e.plotOptions.isStackEnable=!0,e.plotOptions.stackedGroupedEnable=!0,e.plotOptions.stacking="percent"),"horizontal"!==e.displayStyle&&"vertical"!==e.displayStyle||(e.displayStyle="basic"),e.barHorizontal&&(this.chartObject.chartType="bar")),"comboChart"===e.chartType&&("grouped"===e.displayStyle&&(e.plotOptions.isGroupEnable=!0),"stacked"===e.displayStyle&&(e.plotOptions.stacking="normal",e.plotOptions.isStackEnable=!0),"stacked-full"===e.displayStyle&&(e.plotOptions.isStackEnable=!0,e.plotOptions.stacking="percent"),"stacked-grouped"===e.displayStyle&&(e.plotOptions.isStackEnable=!0,e.plotOptions.stackedGroupedEnable=!0,e.plotOptions.stacking="normal"),"stacked-grouped-full"===e.displayStyle&&(e.plotOptions.isStackEnable=!0,e.plotOptions.stackedGroupedEnable=!0,e.plotOptions.stacking="percent")),"lineChart"===e.chartType&&"grouped"===e.displayStyle&&(e.plotOptions.isGroupEnable=!0),"splineChart"===e.chartType&&"grouped"===e.displayStyle&&(e.plotOptions.isGroupEnable=!0),"areaChart"===e.chartType&&("grouped"===e.displayStyle&&(e.plotOptions.isGroupEnable=!0),"stacked-grouped"===e.displayStyle&&(e.plotOptions.stacking="percent",e.plotOptions.isStackEnable=!0)),e.plotOptions&&(e.plotOptions.isStackEnable||e.plotOptions.isGroupEnable)?this.getStackedDataFormat(t,e):this.getBasicDataFormat(t,e)},t.prototype.basicChartJson=function(t,e){return{chart:{height:t.height,type:this.chartObject.chartType},title:{text:""},subtitle:{text:t.subtitle||""},xAxis:{type:t.xAxis.type,title:{text:t.xAxis.title||""}},credits:{enabled:!1},yAxis:{type:t.yAxis.type,title:{text:t.yAxis.title||""}},legend:{enabled:t.legend},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:t.plotOptions.enableDataLabels,format:"{point.y:.1f}"},showInLegend:!0},column:{dataLabels:{enabled:t.plotOptions.enableDataLabels,format:"{point.y:.1f}"},showInLegend:!0},pie:{dataLabels:{enabled:t.plotOptions.enableDataLabels,format:t.plotOptions.dataLabelFormat||"<b>{point.name}</b>: {point.percentage:.1f} %"}},area:{}},tooltip:{headerFormat:t.tooltip.headerFormat||'<span style="font-size:11px">{series.name}</span><br>',pointFormat:t.tooltip.pointFormat||'<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}</b> of total<br/>'},series:e}},t.prototype.getBasicDataFormat=function(t,e){var o=this,a=[],i={type:this.chartObject.chartType,name:"",colorByPoint:!0,data:[]};if(t.forEach(function(t){i.data.push({type:o.chartObject.chartType,name:t[e.dataSource.api.map.xAxis],y:t[e.dataSource.api.map.yAxis]})}),t.length===i.data.length){a.push(i),e.chartType;var n=this.basicChartJson(e,a);return"pieChart"===e.chartType&&("donut"===e.displayStyle&&(i.innerSize="50%",e.plotOptions.pie&&(i.innerSize=e.plotOptions.pie.innerSize)),"semi-circle"===e.displayStyle&&(i.innerSize="50%",n.plotOptions.pie.startAngle=e.plotOptions.pie.startAngle||-90,n.plotOptions.pie.endAngle=e.plotOptions.pie.endAngle||90,n.plotOptions.pie.center=e.plotOptions.pie.center||["50%","75%"],n.plotOptions.pie.size=e.plotOptions.pie.size||"110%")),n}},t.prototype.getStackedDataFormat=function(t,e){var o,a=t.map(function(t){return t[e.dataSource.api.map.xAxis]});if((o=this.getChartData(t,e)).length){var i=this.basicChartJson(e,o);i.xAxis.categories=a;var n="series";return"column"===e.chartType?n="column":"area"===e.chartType&&(n="area"),e.plotOptions.isStackEnable&&(i.plotOptions[n].stacking=e.plotOptions.stacking,i.plotOptions[n].dataLabels={}),i}},t.prototype.getChartData=function(t,e){var o=this,a=[],i=[];t.length&&(e.plotOptions.stackGroup?a=e.plotOptions.stackGroup:t[0]&&t[0][e.plotOptions.stackDataMapKey]&&(a=t[0][e.plotOptions.stackDataMapKey].map(function(t){return t[e.plotOptions.stackDataLabel]}))),t.forEach(function(t){if(t[e.plotOptions.stackDataMapKey]&&t[e.plotOptions.stackDataMapKey].length){var o=[];a.forEach(function(n){var p={name:"",data:[]},s=t[e.plotOptions.stackDataMapKey].find(function(t){return t[e.plotOptions.stackDataLabel]===n}),r=s?s[e.plotOptions.stackDataValue]:0;o.push(r),o.length===a.length&&(p.name=t[e.plotOptions.stackDataLabel],p.data=o,i.push(p))})}});var n=[];if(i.length===t.length&&a.forEach(function(t,a){var p={name:"",data:[],type:""};i.forEach(function(i){p.type=o.chartObject.chartType,p.name=t,p.data.push(i.data[a]),e.plotOptions.stackedGroupedEnable&&(p.stack=a%2?"male":"female")}),n.push(p)}),n.length===a.length)return n},t.prototype.groupBy=function(t,e,o){var a=new Map;t&&t.length&&t.forEach(function(t){var o=t[e],i=a.get(o);i?i.push(t):a.set(o,[t])});var i=Array.from(a.keys());return Array.from(a.values(),function(t,e){return{key:i[e],items:t}})},t.prototype.groupBySum=function(t,e,o){var a={};return t.reduce(function(t,i){var n="";return e.forEach(function(t,e){0!==e&&(n+="-"),n+=i[t]}),a[n]?o.forEach(function(t,e){a[n][t]=+a[n][t]+ +i[t]}):(a[n]=Object.assign({},i),t.push(a[n])),t},[])},t.prototype.getChartDataList=function(t,e){return this._zcHttp.post(t,e)},t=a.c([Object(i.Injectable)({providedIn:"root"}),a.f("design:paramtypes",[n.HttpClient,p.c])],t)}()},"7++q":function(t,e,o){"use strict";o.r(e);var a=o("D57K"),i=o("LoAr"),n=o("WT9V"),p=o("DUHm"),s=o("SHvt"),r=o("981U"),l=o("vtXP"),c=o("05nE"),u=function(){function t(t,e,o,a){this.ws=t,this.modalService=e,this.route=o,this.cache=a,this.actionList=[],this.history=[]}return t.prototype.ngOnInit=function(){var t=this;this.actionList=[];var e={uid:this.route.snapshot.params.uid,entity:this.options.entity},o=this.route.snapshot.queryParams;"true"===o.currentStage&&this.ws.getWorkflow("workflow/getActions","post",e).subscribe(function(e){t.actionList=e.actions});var a={entity:this.options.entity,uid:this.route.snapshot.params.uid};this.historyList$=this.ws.getHistoryByStageGroup(a).pipe(Object(l.a)(function(t){var e=t.findIndex(function(t){return t.stage.code===o.stage});return-1===e?t:t.slice(e)}))},t.prototype.ngAfterViewInit=function(){zc[this.options.id]=this},t.prototype.reload=function(){this.ngOnInit()},t.prototype.performAction=function(t){var e=this;this.cache.clearCache(),this.currentAction=t,zc.params=a.a({},zc.params,{action:t}),this.pageInfo=null;var o=t.page;o=-1!==o.indexOf("/")?"page/"+o:"page/_/_/"+o,this.ws.getActionPageInfo(o).subscribe(function(t){t.instructions.definition&&t.instructions.definition.widgets&&(e.pageInfo=t.instructions.definition.widgets,e.modal=e.modalService.open(e.zcFormModal,{size:"lg",centered:!0,windowClass:"zc-action-modal"}))})},t.prototype.loadHistory=function(){var t={entity:this.options.entity,uid:this.route.snapshot.params.uid};this.historyList$=this.ws.getHistory(t)},t.prototype.close=function(){this.modal&&this.modal.dismiss()},t.prototype.ngOnDestroy=function(){this.modal&&this.modal.dismiss()},a.c([Object(i.Input)(),a.f("design:type",Object)],t.prototype,"options",void 0),a.c([Object(i.ViewChild)("zcFormModal"),a.f("design:type",Object)],t.prototype,"zcFormModal",void 0),t=a.c([Object(i.Component)({selector:"zc-workflow",template:o("yORG"),styles:[o("VuVh")]}),a.f("design:paramtypes",[p.a,s.e,r.ActivatedRoute,c.g])],t)}(),d=o("k/eh");o.d(e,"ZcWorkflowModule",function(){return y});var y=function(){function t(){}return t=a.c([Object(i.NgModule)({imports:[n.CommonModule,d.b],declarations:[u],exports:[u],providers:[p.a]})],t)}()},DUHm:function(t,e,o){"use strict";o.d(e,"a",function(){return s});var a=o("D57K"),i=o("LoAr"),n=o("05nE"),p=o("vtXP"),s=function(){function t(t){this.http=t}return t.prototype.getWorkflow=function(t,e,o){return"post"===e?this.http.post(t,o).pipe(Object(p.a)(function(t){return t.data})):this.http.get(t,{params:o}).pipe(Object(p.a)(function(t){return t.data}))},t.prototype.getActionPageInfo=function(t){return this.http.get(t).pipe(Object(p.a)(function(t){return t.data}))},t.prototype.getHistoryByStageGroup=function(t){return this.http.post("workflow/getHistory",t).pipe(Object(p.a)(function(t){for(var e=t.data.listData.rows,o=[],a=function(t){var a=e[t],i=o.find(function(t){return a.from.stage.code===t.stage.code});if(i)i.history.push(a);else if(a.from.stage.code){var n={stage:a.from.stage,history:[]};n.history.push(a),o.push(n)}},i=0;i<e.length;i++)a(i);return o}))},t.prototype.getHistory=function(t){return this.http.post("workflow/getHistory",t).pipe(Object(p.a)(function(t){return t.data.listData.rows}))},t=a.c([Object(i.Injectable)(),a.f("design:paramtypes",[n.c])],t)}()},VuVh:function(t,e){t.exports=""},j3C3:function(t,e,o){"use strict";o.d(e,"a",function(){return p});var a=o("D57K"),i=o("LoAr"),n=o("05nE"),p=function(){function t(t){this.apiKey=t.settings.googleMapKey,this.libraries=["places"]}return t=a.c([Object(i.Injectable)(),a.f("design:paramtypes",[n.b])],t)}()},pnHo:function(t,e,o){"use strict";o("F6v2"),o("gAiz");var a=o("Qgf8");o("cjWd"),o("Uh16");o.d(e,"a",function(){return a.ZcFormModule})},yORG:function(t,e){t.exports='<div class="zc-widget-workflow" *ngIf="actionList && actionList.length >0">\n  <div class="workflow-head" *ngIf="options.title">\n    <span>{{options.title}}</span>\n  </div>\n  <div class="workflow-body">\n    <div class="workflow-action-btn" *ngFor=\'let action of actionList; let inx = index;\'>\n      <button type="button" (click)="performAction(action)" class="btn btn-default"\n        [ngStyle]="{\'backgroundColor\': action.bg_color,\'color\':action.text_color}">\n        <i *ngIf="action.icon" [ngClass]="action.icon"></i>\n        <label>{{action.name}}</label>\n      </button>\n    </div>\n  </div>\n</div>\n\x3c!-- <div class="zc-workflow-history">\n  <div class="group-container" *ngFor="let groupItem of historyList$ | async;let index=index">\n    <h4 class="m-2">{{groupItem.stage?.name}}</h4>\n    <div class="item hr bg-white p-2 mb-2" *ngFor="let item of groupItem.history;let index=index">\n      <div>{{item.from?.stage?.name}} : Workflow</div>\n      <label>{{item.from?.user?.first_name}}</label> <strong> {{item.from?.action?.action}}</strong> To Credit\n      <label>{{item.to?.user?.first_name}}</label> On {{item?.received_date_time | date}}\n    </div>\n  </div>\n</div> --\x3e\n\n<ng-template #zcFormModal let-c="close" let-d="dismiss">\n  <div class="modal-header">\n    <h4 class="modal-title" id="modal-basic-title">{{currentAction.name}}</h4>\n    <i class="btn icon-close" (click)="d();"></i>\n  </div>\n  <div class="modal-body">\n    <zc-page-render [options]="{ widgets: pageInfo }"></zc-page-render>\n  </div>\n</ng-template>'}}]);