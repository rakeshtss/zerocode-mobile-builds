(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{"920x":function(n,t){n.exports=".internal-rating .category-header,\n.internal-rating .sub-category-header {\n  color: #221f60; }\n\n.internal-rating .category-title-header {\n  font-size: 14px;\n  padding-bottom: 5px !important;\n  color: #221f60; }\n\n.internal-rating p-accordiontab .ui-accordion-content {\n  border: none !important; }\n\n.internal-rating p-accordiontab .ui-accordion-header,\n.internal-rating p-accordiontab .ui-state-active {\n  margin: 0 !important;\n  border: none !important; }\n\n.internal-rating p-accordiontab .ui-accordion-header :hover,\n  .internal-rating p-accordiontab .ui-state-active :hover {\n    color: black !important; }\n\n.internal-rating p-accordiontab .ui-accordion-header a,\n  .internal-rating p-accordiontab .ui-accordion-header .ui-accordion-toggle-icon,\n  .internal-rating p-accordiontab .ui-state-active a,\n  .internal-rating p-accordiontab .ui-state-active .ui-accordion-toggle-icon {\n    border: none !important;\n    background-color: #fef0d3 !important;\n    color: black !important; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a,\n  .internal-rating p-accordiontab .ui-state-active > a {\n    padding: 0 !important;\n    display: flex;\n    align-items: center; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a:focus,\n    .internal-rating p-accordiontab .ui-state-active > a:focus {\n      outline: none; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a .category-header .highlight,\n    .internal-rating p-accordiontab .ui-state-active > a .category-header .highlight {\n      padding: 10px;\n      background-color: #FAEDB6;\n      color: #221f60;\n      border-right: 3px solid #fff;\n      text-align: center !important; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a .ui-accordion-toggle-icon,\n    .internal-rating p-accordiontab .ui-state-active > a .ui-accordion-toggle-icon {\n      min-width: 30px; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a p-header,\n    .internal-rating p-accordiontab .ui-state-active > a p-header {\n      width: 100%; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a p-header .category-header,\n      .internal-rating p-accordiontab .ui-state-active > a p-header .category-header {\n        margin: 0 !important; }\n\n.internal-rating p-accordiontab .ui-accordion-header > a p-header .category-header .header-left,\n        .internal-rating p-accordiontab .ui-state-active > a p-header .category-header .header-left {\n          display: flex;\n          align-items: center;\n          padding-left: 0; }\n\n.internal-rating p-accordiontab p-accordiontab .ui-accordion-header {\n  border: 0px !important; }\n\n.internal-rating p-accordiontab p-accordiontab .ui-accordion-header,\n.internal-rating p-accordiontab p-accordiontab .ui-state-active {\n  border-bottom: 1px solid #ccc !important; }\n\n.internal-rating p-accordiontab p-accordiontab .ui-accordion-header :hover,\n  .internal-rating p-accordiontab p-accordiontab .ui-state-active :hover {\n    color: black !important; }\n\n.internal-rating p-accordiontab p-accordiontab .ui-accordion-header a:focus,\n  .internal-rating p-accordiontab p-accordiontab .ui-state-active a:focus {\n    outline: inherit !important; }\n\n.internal-rating p-accordiontab p-accordiontab .ui-accordion-header a,\n  .internal-rating p-accordiontab p-accordiontab .ui-accordion-header .ui-accordion-toggle-icon,\n  .internal-rating p-accordiontab p-accordiontab .ui-state-active a,\n  .internal-rating p-accordiontab p-accordiontab .ui-state-active .ui-accordion-toggle-icon {\n    background-color: white !important;\n    border: none !important;\n    color: #221f60 !important; }\n\n.internal-rating p-accordiontab p-accordiontab .ui-accordion-header > a,\n  .internal-rating p-accordiontab p-accordiontab .ui-state-active > a {\n    padding: 0.571em 1em !important; }\n"},"N+aR":function(n,t,a){"use strict";a.r(t);var i=a("D57K"),o=a("LoAr"),e=a("WT9V"),r=a("981U"),c=a("05nE"),s=a("vtXP"),d=function(){function n(n){this.http=n}return n.prototype.getSurveyDetails=function(n,t){return this.http.post(n,t).pipe(Object(s.a)(function(n){return n.data}))},n.prototype.saveEditSurvey=function(n,t){return this.http.post(n,t)},n=i.c([Object(o.Injectable)(),i.f("design:paramtypes",[c.c])],n)}(),p=function(){function n(n,t,a){this.irs=n,this.as=t,this.route=a,this.isReadonly=!1,this.showBtn=!1,this.model={}}return n.prototype.ngOnInit=function(){var n=this,t=this.route.snapshot.params;if(this.payload={survey:this.options.survey,uid:t.uid},this.options.api.params&&this.options.api.params.length>0){var a=this.as.getParams(this.options.api.params,zc);Object.assign(this.payload,a)}var i=this.checkMode(this.options.mode);"view"===i&&(this.isReadonly=!0),this.irs.getSurveyDetails(this.options.api.list,this.payload).subscribe(function(t){var a=JSON.parse(JSON.stringify(t));n.weightageConfig=a.widgetMeta.weightage_config,t.widgetMeta&&t.widgetMeta.entity&&(n.payload.entity=t.widgetMeta.entity),n.questionList=a.categories,n.updateFormula(),"view"!==i&&(n.showBtn=!0)}),this.zcFormOptions={id:this.options.id+"Form",mode:this.options.mode,fields:this.options.fields}},n.prototype.ngAfterViewInit=function(){zc[this.options.id]=this},n.prototype.reload=function(){this.ngOnInit()},n.prototype.ngDoCheck=function(){},n.prototype.dropDownChange=function(n,t){t.answer=n.value,this.updateFormula()},n.prototype.inputTextChange=function(n,t){console.log("event",n),this.updateFormula()},n.prototype.updateFormula=function(){this.questionList.map(function(n){n.category.calWeightage=0;var t=0,a=0;n.subCategories.map(function(n){var i=0,o=0;if(n.questions.forEach(function(n){n.answer&&n.answer.weightage>0&&(i+=n.answer.weightage,o+=1)}),i/=o,i=isNaN(i)?0:i.toFixed(2),n.subCategory.calWeightage=i,i>0){var e=parseFloat(n.weightage)/100;t+=e*i,a+=e}}),n.category.calWeightage=(t/a).toFixed(2),console.log("category weightage",n.category.calWeightage)})},n.prototype.checkMode=function(n){try{return new Function("return "+n+" ; ")()}catch(t){console.log("key",n)}},n.prototype.submit=function(n){var t=this;console.log("arg",n);var a=this.getAnswers();if(this.payload.answers=a,n&&n.params){var i=this.as.getParams(n.params,zc);Object.assign(this.payload,i)}this.irs.saveEditSurvey(this.options.api.save,this.payload).subscribe(function(a){t.as.onSuccess(n.onSuccess,{})})},n.prototype.submitBySubCategory=function(n,t){var a=this.getAnswersBySubCategory(n,t);if(this.payload.answers=a,this.options.api.params){var i=this.as.getParams(this.options.api.params,zc);Object.assign(this.payload,i)}this.irs.saveEditSurvey(this.options.api.save,this.payload).subscribe(function(n){})},n.prototype.getAnswersBySubCategory=function(n,t){var a=[];return t.questions.forEach(function(i){if(i.answer){var o={category:n.category.code,subCategory:t.subCategory.code,question:i.code,type:i.type,answer:i.answer};a.push(o)}}),a},n.prototype.getAnswers=function(){var n=[];return this.questionList.forEach(function(t){t.subCategories.forEach(function(a){a.questions.forEach(function(i){if(i.answer){var o={category:t.category.code,subCategory:a.subCategory.code,question:i.code,type:i.type,answer:i.answer};n.push(o)}})})}),n},i.c([Object(o.Input)(),i.f("design:type",Object)],n.prototype,"options",void 0),n=i.c([Object(o.Component)({selector:"zc-survey-internal-rating",template:a("l+4N"),encapsulation:o.ViewEncapsulation.None,styles:[a("920x")]}),i.f("design:paramtypes",[d,c.a,r.ActivatedRoute])],n)}(),l=a("Hhcr"),u=a("Hpdm"),g=a("IfiR"),h=function(){function n(){}return n.prototype.transform=function(n,t){console.log("value",n),console.log("args",t);var a=0;return t.forEach(function(n){n.answer&&(a+=n.answer.weightage)}),a},n=i.c([Object(o.Pipe)({name:"internalFactor"})],n)}(),b=a("pnHo");a.d(t,"InternalRatingModule",function(){return v});var v=function(){function n(){}return n=i.c([Object(o.NgModule)({declarations:[p,h],imports:[e.CommonModule,b.a,l.AccordionModule,u.DropdownModule,g.FormsModule],providers:[d],exports:[p]})],n)}()},"l+4N":function(n,t){n.exports='<div class="internal-rating bg-white survey-header">\n  <h3 class="header p-2" *ngIf="options.title">{{ options.title }}</h3>\n  <div class="body p-4">\n    <div class="row col-12 m-0 p-0 category-title-header">\n      <div class="col-9 pl-0">Business Risks Categories</div>\n      <div class="col-3">\n        <div class="row">\n          <div class="col-6 text-center">Factor</div>\n          <div class="col-6 text-center">Weight(%)</div>\n        </div>\n      </div>\n    </div>\n    <p-accordion [multiple]="true">\n      <p-accordionTab\n        [selected]="true"\n        [cache]="true"\n        *ngFor="let category of questionList"\n      >\n        <p-header>\n          <div class="category-header">\n            <div class="row col-12 m-0 p-0">\n              <div class="col-9 header-left">{{ category.category.name }}</div>\n              <div class="col-3">\n                <div class="row">\n                  <div class="col-6 text-right highlight">\n                    {{ category.category.calWeightage || \'0.00\' }}\n                  </div>\n                  <div class="col-6 text-right highlight">\n                    {{ category.weightage }} %\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </p-header>\n        <p-accordion [multiple]="true">\n          <p-accordionTab\n            [selected]="false"\n            [cache]="true"\n            *ngFor="let subCategory of category.subCategories"\n          >\n            <p-header>\n              <div class="sub-category-header">\n                <div class="row col-12 m-0 p-0">\n                  <div class="col-9 pl-0">\n                    {{ subCategory.subCategory.name }}\n                  </div>\n                  <div class="col-3">\n                    <div class="row">\n                      <div class="col-6 text-right">\n                        {{ subCategory.subCategory.calWeightage || \'0.00\' }}\n                      </div>\n                      <div class="col-6 text-right">\n                        {{ subCategory.weightage }} %\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </p-header>\n            <div *ngFor="let question of subCategory.questions">\n              <div class="question">\n                <div class="row col-12">\n                  <div class="col">\n                    <label>{{ question.question }}</label>\n                  </div>\n                  <div class="col-4">\n                    <p-dropdown\n                      [disabled]="isReadonly"\n                      optionLabel="name"\n                      appendTo="body"\n                      dataKey="uid"\n                      [style]="{ width: \'100%\' }"\n                      placeholder="select any options"\n                      [options]="question.options_data.data"\n                      [(ngModel)]="question.answer"\n                      (onChange)="dropDownChange($event, question)"\n                    ></p-dropdown>\n                  </div>\n                  <div class="col-2">\n                    <input\n                      type="number"\n                      [readonly]="isReadonly"\n                      min="0"\n                      class="form-control"\n                      *ngIf="question.answer"\n                      (change)="inputTextChange($event, question)"\n                      [(ngModel)]="question.answer.weightage"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n            \x3c!--\n              <div class="col-12 text-right p-2 pr-5">\n                <button type="submit" (click)="submitBySubCategory(category,subCategory)"\n                  class="btn btn-primary submit-button">Save</button>\n              </div>\n            --\x3e\n          </p-accordionTab>\n        </p-accordion>\n      </p-accordionTab>\n    </p-accordion>\n  </div>\n  <div class="footer text-center pb-2" *ngIf="showBtn">\n    <zc-form [options]="zcFormOptions" [model]="model"></zc-form>\n    \x3c!-- <button\n      type="submit"\n      (click)="submit()"\n      class="btn btn-primary submit-button"\n    >\n      Submit\n    </button> --\x3e\n  </div>\n</div>\n'}}]);